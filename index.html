<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.bigbrosci.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"right","width":240,"display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="Learn VASP The Hard Way">
<meta property="og:url" content="http://www.bigbrosci.com/index.html">
<meta property="og:site_name" content="Learn VASP The Hard Way">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="By BigBro(a)s">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://www.bigbrosci.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Learn VASP The Hard Way</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Learn VASP The Hard Way</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">The 2nd edition</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">By BigBro(a)s</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">132</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">168</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/07/24/ex02_v3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/24/ex02_v3/" class="post-title-link" itemprop="url">Ex02_V3 服务器和程序语言</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-07-24 02:06:48 / 修改时间：10:14:03" itemprop="dateCreated datePublished" datetime="2022-07-24T02:06:48-04:00">2022-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/07/24/ex02_v3/" class="post-meta-item leancloud_visitors" data-flag-title="Ex02_V3 服务器和程序语言" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/07/24/ex02_v3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/07/24/ex02_v3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="服务器相关"><a href="#服务器相关" class="headerlink" title="服务器相关"></a>服务器相关</h2><p>VASP的计算就跟开车一样，设计到很多的内容，比如大街上的路怎么铺的？桥怎么建的？发动机怎么工作的？方向盘怎么工作的，刹车片什么材料做的？车身颜色怎么喷的？ 没有人会懂所有相关的知识。但是怎么打开车门，坐车里，启动发动机，踩油门，打方向盘，这是本教程所关心的，也就是类似驾校教练指导你学会如何开车，而不是关系如何去造车，去铺路。这里的车就是VASP。要开车，必须手头上有车，没车我瞎BB再多也是白搭。</p>
<h3 id="1-知道怎么连接自己组内或者租赁的服务器"><a href="#1-知道怎么连接自己组内或者租赁的服务器" class="headerlink" title="1) 知道怎么连接自己组内或者租赁的服务器"></a>1) 知道怎么连接自己组内或者租赁的服务器</h3><p>后面大师兄会介绍一些挂载服务器的方法，但这些基本的连接服务器操作是基础。一般来说通过终端（terminal）来实现，Windows下有很多软件可以参考，比如：</p>
<ul>
<li>Winscp + Putty</li>
<li><em>MobaXterm</em></li>
</ul>
<p>当然还有其他的软件，大师兄平时很少用Windows，推荐的就这两个。尤其是MobaXterm。 对于Ubuntu和Mac，则可以直接打开Terminal进行连接。</p>
<h3 id="2-初步学习使用基本的linux命令"><a href="#2-初步学习使用基本的linux命令" class="headerlink" title="2) 初步学习使用基本的linux命令:"></a>2) 初步学习使用基本的linux命令:</h3><ul>
<li><p>进入目录 : cd </p>
</li>
<li><p>移动文件(夹): mv </p>
</li>
<li>复制文件: cp </li>
<li>复制文件夹用: cp -r ; 注意 cp 和 -r 之间有个或者N个空格</li>
<li>创建文件夹:mkdir     </li>
<li>删除文件: rm ;    </li>
<li>删除文件夹: rm  -r    </li>
<li>强制删除文件夹: rm -fr  或者 rm -rf  (f 和 r 的顺序可以颠倒 )        </li>
<li>显示目录下文件: ls 等命令;   </li>
<li>这里大师兄就不再啰嗦了，后面教程里会介绍一些命令的使用，老司机们自动略过，新手自行百度：linux 命令，你会得到铺天盖地的信息。</li>
</ul>
<h3 id="3-手上有可以正常运行的VASP程序"><a href="#3-手上有可以正常运行的VASP程序" class="headerlink" title="3) 手上有可以正常运行的VASP程序"></a>3) 手上有可以正常运行的VASP程序</h3><ul>
<li><p>组里面已经安装好vasp程序，或者使用超算中心的VASP程序，只要手上有可以正常运行的VASP即可。因为我们在本书里，<strong>不讨论</strong>：</p>
<ul>
<li>去哪里下载VASP? 怎么安装VASP? 去哪里下载VASP的pseudo potentials?</li>
</ul>
<ul>
<li>前面的问题可以在QQ群里面讨论，也可以付费求助别人解决。</li>
<li>对于VASP的pseudo potentials，也就是POTCAR。<ul>
<li>你老板买了VASP的版权，就直接问他要。</li>
<li>用的盗版VASP，找其他人要一份，但是发文章的时候会很麻烦。国内很多人都是找有版权的老师挂名，其实这是非常学术不道德的事情。一方面涉及到版权，一方面涉及到瞎几把挂名。</li>
<li>免费的可以用QE，CP2K，GPAW等开源的软件，没必要非得在VASP上面死磕。</li>
</ul>
</li>
</ul>
</li>
<li><p>知道怎么提交VASP任务？</p>
<ul>
<li>自己组里都有提交任务的脚本，如果没有的话只能自行动手解决咯，可以<ul>
<li>找组里的师兄师姐帮忙;</li>
<li>第一个啃螃蟹的人，找老师解决，求助服务器商，求助超算管理员；</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="程序语言学习"><a href="#程序语言学习" class="headerlink" title="程序语言学习"></a><strong>程序语言学习</strong></h2><p>建议大家学习两个语言: bash 和 python。主要是为了辅助计算，节省时间，并拓展自己的思维方式。现在机器学习，人工智能越来越热，学会使用Python或者其他语言，或许可以上升到以后能否生存的高度了。</p>
<ul>
<li>bash语言：日常terminal里面常用的基本命令，比如cd，ls这些，以及结合基本的逻辑语法，可以让你写出一些简单的小脚本。极大提高自己的工作效率；极大的意思就是别人一天或者N天的活，你可能几秒就完事。</li>
<li>Python 语言：python是一款语法简单，很容易上手的程序，有着丰富的数据库支持，目前深受科研人员的喜爱。<strong>注意</strong>，这里我们不讨论类似：python是一门高级语言，运行的时候跟机器交互性差，需要时间比C++长这样的问题。因为这是专业程序员的事。不出意外，看这本书的大部分人，能够用python写个小脚本，方便地处理自己的任务和数据，就已经非常棒了，快和慢，对于我们来说，顶死了也就几秒的问题，完全可以接受。</li>
<li>学习程序语言，一方面可以极大地提高自己的工作效率，另一方面也可以改变自己看待事物的思维方式。  </li>
<li>如果不喜欢Python，当然也可以学习其他的程序语言，C++，R，Java等。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1）学习VASP前，先保证自己能顺利连接到服务器，然后运行VASP。这个大师兄没法帮忙，可以求助自己课题组中的师兄师姐，老板，或者群里咨询。</p>
<p>2）新手有大把的时间，建议系统性学习bash，python语言。Python可以换成其他你自己感兴趣的。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/07/23/A34/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/23/A34/" class="post-title-link" itemprop="url">A34 利用ASE的热力学模块计算气体的熵</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-23 15:30:16" itemprop="dateCreated datePublished" datetime="2022-07-23T15:30:16-04:00">2022-07-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-07-24 12:21:53" itemprop="dateModified" datetime="2022-07-24T12:21:53-04:00">2022-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/07/23/A34/" class="post-meta-item leancloud_visitors" data-flag-title="A34 利用ASE的热力学模块计算气体的熵" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/07/23/A34/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/07/23/A34/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="简单说明："><a href="#简单说明：" class="headerlink" title="简单说明："></a>简单说明：</h3><p>ASE提供的热力学模块可以很方便地获取气体分子的热力学数据比如吉布斯自由能，熵等。具体参见：<a target="_blank" rel="noopener" href="https://wiki.fysik.dtu.dk/ase/ase/thermochemistry/thermochemistry.html。本节介绍下气体分子熵的计算，用到的是**IdealGasThermo**这一个模块，例子为氨气分子（NH3）。**IdealGasThermo**计算气体分子的热力学自由能，除了VASP计算之外，要注意的有4点注意的，这些都要输入到对应的参数之中。">https://wiki.fysik.dtu.dk/ase/ase/thermochemistry/thermochemistry.html。本节介绍下气体分子熵的计算，用到的是**IdealGasThermo**这一个模块，例子为氨气分子（NH3）。**IdealGasThermo**计算气体分子的热力学自由能，除了VASP计算之外，要注意的有4点注意的，这些都要输入到对应的参数之中。</a></p>
<p>1） 分子的对称数；</p>
<p>2）分子的结构：线性或者非线性；</p>
<p>3）分子中未成对的电子数目，或者多重度。</p>
<p>4）温度，压强</p>
<p>这些具体的输入，网站上都有相应的说明，自己根据分子的特性改下即可。比如对称数不会算的话，可以参考下面的这个表格。</p>
<p><img src="/2022/07/23/A34/A34_1.png" alt=""></p>
<h3 id="脚本部分："><a href="#脚本部分：" class="headerlink" title="脚本部分："></a>脚本部分：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Created on Tue Jul 12 18:38:35 2022</span></span><br><span class="line"><span class="string">https://janaf.nist.gov/tables/H-083.html #Database</span></span><br><span class="line"><span class="string">Symmetry Number: Table 10.1 and Appendix B of C. Cramer “Essentials of Computational Chemistry”, 2nd Ed.</span></span><br><span class="line"><span class="string">spin:  0 for molecules in which all electrons are paired, 0.5 for a free radical with a single unpaired electron, 1.0 for a triplet with two unpaired electrons, such as O_2.</span></span><br><span class="line"><span class="string">@author: qli</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> ase.io <span class="keyword">import</span> read, write</span><br><span class="line"><span class="keyword">from</span> ase.thermochemistry <span class="keyword">import</span> IdealGasThermo</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> constants <span class="keyword">as</span> con</span><br><span class="line"></span><br><span class="line">atoms = read(<span class="string">&#x27;./freq/POSCAR&#x27;</span>)</span><br><span class="line">sym = <span class="number">3</span> <span class="comment"># symmetry number of NH3 </span></span><br><span class="line">spin = <span class="number">0</span> <span class="comment"># spin of NH3. </span></span><br><span class="line">tem = <span class="number">298.15</span> <span class="comment"># Temperature</span></span><br><span class="line">out = read(<span class="string">&#x27;./OUTCAR&#x27;</span>,  <span class="built_in">format</span>=<span class="string">&#x27;vasp-out&#x27;</span>)</span><br><span class="line">potentialenergy = out.get_potential_energy()</span><br><span class="line"></span><br><span class="line">model = read(<span class="string">&#x27;./freq/POSCAR&#x27;</span>)</span><br><span class="line"><span class="comment"># model_positions = model.get_positions()</span></span><br><span class="line"></span><br><span class="line">vib_energies = []</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./freq/OUTCAR&#x27;</span>) <span class="keyword">as</span> f_in:</span><br><span class="line">    lines = f_in.readlines()</span><br><span class="line">    <span class="keyword">for</span> num, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(lines):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;cm-1&#x27;</span> <span class="keyword">in</span> line:</span><br><span class="line">            vib_e = <span class="built_in">float</span>(line.rstrip().split()[-<span class="number">2</span>])</span><br><span class="line">            vib_energies.append(vib_e)</span><br><span class="line"></span><br><span class="line">vib_energies = np.array(vib_energies[:-<span class="number">6</span>])/<span class="number">1000</span> <span class="comment"># For Gas, the last six are translation and rotation</span></span><br><span class="line"><span class="comment"># zpe = sum(vib_energies)/2</span></span><br><span class="line"></span><br><span class="line">thermo = IdealGasThermo(vib_energies=vib_energies,</span><br><span class="line">                        potentialenergy=potentialenergy,</span><br><span class="line">                        atoms=atoms,</span><br><span class="line">                        geometry=<span class="string">&#x27;nonlinear&#x27;</span>,</span><br><span class="line">                        symmetrynumber=<span class="number">3</span>, spin=spin)</span><br><span class="line"></span><br><span class="line">zpe = thermo.get_ZPE_correction()</span><br><span class="line">entropy = thermo.get_entropy(temperature=tem, pressure=<span class="number">101325</span>,verbose=<span class="literal">True</span>)  <span class="comment"># Unit eV/K</span></span><br><span class="line">TS = tem * entropy   </span><br><span class="line">G = potentialenergy + zpe - TS</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;G&#x27;</span>, G)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;S&#x27;</span>, con.Avogadro * con.electron_volt * entropy, <span class="string">&#x27;J/K/mol&#x27;</span>)  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="运行实例："><a href="#运行实例：" class="headerlink" title="运行实例："></a>运行实例：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbro test_nh3 % ls</span><br><span class="line">CONTCAR             INCAR               OUTCAR              freq/</span><br><span class="line">H-083.txt           KPOINTS             POSCAR              get_gas_entropy.py*</span><br><span class="line">qli@bigbro test_nh3 % python3 get_gas_entropy.py </span><br><span class="line">Entropy components at T = 298.15 K and P = 101325.0 Pa:</span><br><span class="line">=================================================</span><br><span class="line">                           S               T*S</span><br><span class="line">S_trans (1 bar)    0.0014947 eV/K        0.446 eV</span><br><span class="line">S_rot              0.0004981 eV/K        0.149 eV</span><br><span class="line">S_elec             0.0000000 eV/K        0.000 eV</span><br><span class="line">S_vib              0.0000047 eV/K        0.001 eV</span><br><span class="line">S (1 bar -&gt; P)    -0.0000011 eV/K       -0.000 eV</span><br><span class="line">-------------------------------------------------</span><br><span class="line">S                  0.0019964 eV/K        0.595 eV</span><br><span class="line">=================================================</span><br><span class="line">G -19.220631915628093</span><br><span class="line">S 192.6230402411749 J/K/mol</span><br></pre></td></tr></table></figure>
<h4 id="简单说明：-1"><a href="#简单说明：-1" class="headerlink" title="简单说明："></a>简单说明：</h4><p>1）目录里面H-083.txt是NIST-<em>JANAF</em>的热力学数据库的值。自己可以测试对比下。</p>
<p>2）脚本所在目录是NH3分子优化的计算，脚本读取当前的OUTCAR获取能量，</p>
<p>3）目录里面还有个<code>freq/</code>，对应的是NH3分子的频率计算，读取其中的POSCAR和OUTCAR获取分子结构和频率信息。对分子来说，VASP频率计算结果中的后面6个对应的是平动和转动部分，不能作为振动计算熵。平动和转动的熵是通过IdealGasThermo模块和分子结构来计算的，具体计算公式参考统计热力学、物理化学等。</p>
<p>4）计算表面吸附物种的可以使用<code>Harmonic limit</code>这个模块。</p>
<h3 id="示例下载："><a href="#示例下载：" class="headerlink" title="示例下载："></a>示例下载：</h3><p>关注公众号：大师兄科研网， 后台回复关键词： NH3 </p>
<p><img src="/2022/07/23/A34/qrcode.png" alt=""></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/07/23/ex01_v3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/23/ex01_v3/" class="post-title-link" itemprop="url">Ex01_V3 学习VASP的基本要求</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-23 03:06:48" itemprop="dateCreated datePublished" datetime="2022-07-23T03:06:48-04:00">2022-07-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-07-24 10:13:14" itemprop="dateModified" datetime="2022-07-24T10:13:14-04:00">2022-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/07/23/ex01_v3/" class="post-meta-item leancloud_visitors" data-flag-title="Ex01_V3 学习VASP的基本要求" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/07/23/ex01_v3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/07/23/ex01_v3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h6 id="在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。-化学的基本知识如果没有掌握，不建议学习本书。"><a href="#在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。-化学的基本知识如果没有掌握，不建议学习本书。" class="headerlink" title="在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。 化学的基本知识如果没有掌握，不建议学习本书。"></a>在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。 化学的基本知识如果没有掌握，不建议学习本书。</h6><h2 id="1-操作系统"><a href="#1-操作系统" class="headerlink" title="1  操作系统"></a>1  <strong>操作系统</strong></h2><p>做计算，有三个操作系统可以选择：</p>
<ul>
<li>Windows 系统：会使用Windows系统:会开机，打字，安装软件;</li>
<li><p>Linux 系统，强烈推荐，大师兄本人一直用的是Ubuntu，但不局限于Ubuntu系统，自己喜欢什么就用什么。</p>
</li>
<li><p>Mac系统，兼顾Windows和Linux，一般比较贵，经济条件允许，也可以。</p>
</li>
</ul>
<h5 id="给重点照顾对象：Windows用户的第一个提醒："><a href="#给重点照顾对象：Windows用户的第一个提醒：" class="headerlink" title="给重点照顾对象：Windows用户的第一个提醒："></a>给重点照顾对象：Windows用户的第一个提醒：</h5><p>Windows用户在进行计算的时候，只要计算出错了，就要本能地记起第一个解决的办法： dos2unix 。 这个命令干什么的不要紧，先死死记住即可。</p>
<h2 id="2-文本编辑工具"><a href="#2-文本编辑工具" class="headerlink" title="2 文本编辑工具"></a>2 <strong>文本编辑工具</strong></h2><p>文本编辑工具主要用来编辑，查看VASP的输入（出）文件，要求会打开文件，打字，保存文件。</p>
<h3 id="1）vim"><a href="#1）vim" class="headerlink" title="1）vim"></a>1）<a target="_blank" rel="noopener" href="https://www.vim.org/">vim</a></h3><p>这个<strong>必须要学会</strong>，linux下面自带。原因是绝大多数的计算都是在linux下面进行的，学会vim的基本操作可以极大提高你的文字处理能力和工作效率。关于VIM的使用介绍，自己百度下或者搜一搜相关的视频，学习下。</p>
<h3 id="2-notepad"><a href="#2-notepad" class="headerlink" title="2) notepad++"></a>2) <a target="_blank" rel="noopener" href="https://notepad-plus-plus.org/">notepad++</a></h3><ul>
<li>这个是对于Windows用户来说的，要求会创建文件，输入内容并保存文件，<strong>这个软件或者类似的必须学会使用!</strong></li>
</ul>
<p>原因在于：Windows下面自带的记事本保存的文件与linux下的文件格式不匹配，提交任务的时候经常出问题，用notepad++则不会出现这个问题。</p>
<p><strong>因此</strong>，Windows的记事本杜绝使用。为了安全，即使用了notepad++，Windows用户在进行计算的时候，也需要注意下面两点：</p>
<ul>
<li><p>Windows下面编辑的输入文件，如果想在linux服务器上运行，最好先执行: dos2unix 这个命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dos2unix  INCAR</span><br></pre></td></tr></table></figure>
</li>
<li><p>Windows用户计算出错了，一定要首先想到 dos2linux 这个命令来解决问题!!!</p>
</li>
</ul>
<h3 id="3）-Atom"><a href="#3）-Atom" class="headerlink" title="3） Atom"></a>3） <a target="_blank" rel="noopener" href="https://atom.io/">Atom</a></h3><p>这个Atom是文本编辑工具，不是原子的意思。Windows，Linux，Mac系统均可使用。</p>
<h2 id="3-常用建模相关软件"><a href="#3-常用建模相关软件" class="headerlink" title="3 常用建模相关软件:"></a>3 <strong>常用建模相关软件:</strong></h2><p>本书默认大家已经在自己的电脑里安装了下面三个软件：</p>
<h3 id="1-Material-Studio"><a href="#1-Material-Studio" class="headerlink" title="1) Material Studio"></a><strong>1) Material Studio</strong></h3><ul>
<li>这个软件，百度里面一大堆下载链接，安装教程，大家自行下载安装即可。</li>
<li>本书默认大家已经安装成功，会不会使用暂且不要求；</li>
<li>不要问我从哪里下载，安装出现问题也不要找我解决。</li>
<li>另外，MS很贵，国内大部分人都是用的盗版软件，没有版权，不建议使用。</li>
</ul>
<h3 id="2）VESTA"><a href="#2）VESTA" class="headerlink" title="2）VESTA"></a>2）<strong><a target="_blank" rel="noopener" href="http://jp-minerals.org/vesta/en/">VESTA</a></strong></h3><p>来自日本的良心软件，Linux，Windows，Mac系统均可使用。链接：<a target="_blank" rel="noopener" href="http://jp-minerals.org/vesta/en/。无版权困扰，发文章的时候要注明下图是用VESTA做的，引用下对应的文章。">http://jp-minerals.org/vesta/en/。无版权困扰，发文章的时候要注明下图是用VESTA做的，引用下对应的文章。</a></p>
<ul>
<li><p>Windows下面安装就不再介绍了，下载程序，解压，双击图标即可运行，相信大家都能搞定。</p>
</li>
<li><p>Linux下安装: </p>
<ul>
<li><p>下载binary程序文件，本人解压后放到了/opt/VESTA-x86_64目录</p>
</li>
<li><p>编辑 ~/.bashrc 文件，在文件最后，添加下面2行。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export VESTA=/opt/VESTA-x86_64 </span><br><span class="line">export PATH=&quot;$PATH:$VESTA&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>在终端里面进行的操作如下：第一行打开~/.bashrc文件, 自己添加上面提到的两行即可，第二行更新下~/bashrc文件，第三行运行VESTA。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/.bashrc</span><br><span class="line">$ . ~/.bashrc</span><br><span class="line">$ VESTA</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3）p4vasp"><a href="#3）p4vasp" class="headerlink" title="3）p4vasp"></a>3）<a target="_blank" rel="noopener" href="http://www.p4vasp.at"><strong>p4vasp</strong></a></h3><p>p4vasp主要有建模，可视化以及后处理的一些功能。</p>
<ul>
<li>链接：<a target="_blank" rel="noopener" href="http://www.p4vasp.at/">http://www.p4vasp.at/</a></li>
</ul>
<ul>
<li><p>Windows版本，很久没有更新了，点击此处下载，解压,双击图标即可运行。也可以在大师兄QQ群或者其他QQ群文件中下载。</p>
</li>
<li><p>Linux版本功能更加强大。也很久没更新了。 Ubuntu（18以及更老的版本）用户使用命令一键安装： <strong>sudo apt-get install p4vasp</strong></p>
<p>Ubuntu 20以及后续的安装有些麻烦。p4vasp已经不更新了，很多功能可以用其他的软件替代。如果坚持使用p4vasp，可以联系大师兄付费安装（50块钱）。</p>
</li>
</ul>
<h3 id="4）-ASE"><a href="#4）-ASE" class="headerlink" title="4） ASE"></a>4） <a target="_blank" rel="noopener" href="https://wiki.fysik.dtu.dk/ase/index.html">ASE</a></h3><p>ASE 是Atomic Simulation Environment的缩写，可以实现搭建结构，读取VASP的输入和输出，以及一些后处理功能。如果p4vasp没办法安装，那么ASE必须要安装在你的电脑上。</p>
<h3 id="5）其他软件"><a href="#5）其他软件" class="headerlink" title="5）其他软件"></a>5）其他软件</h3><p>这里说的软件主要是针对VASP计算的模型搭建这一方面，有兴趣的也可以试试<a target="_blank" rel="noopener" href="https://avogadro.cc">Avogadro</a>. 值得一提的是，我们自己的国产建模软件那是相当得少，更别提计算软件了。而我们比较擅长的是写教程和后处理，然后发公众号割韭菜。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结:"></a><strong>总结:</strong></h2><ul>
<li>初学者学习本书,所必须具有的技能:</li>
<li><ul>
<li>熟练使用一个操作系统；</li>
<li>会编辑文本，写入和保存文件；</li>
<li><ul>
<li><strong>Windows 用户Notepad++必须掌握</strong>,</li>
<li>linux用户可以vim或者其他编辑器，比如Atom</li>
</ul>
</li>
<li>安装好或者会初步使用一款建模软件。-<ul>
<li><strong>p4vasp </strong>，<strong>ASE</strong>安装在Windows和Ubuntu系统上；</li>
<li><strong>VESTA</strong> 安装在Windows，Ubuntu，Mac系统上；</li>
<li><strong>Materials Studio</strong> 安装在Windows上（没版权就别安装了）</li>
</ul>
</li>
<li>会连接服务器，使用的vasp程序并且会提交任务<ul>
<li>这个大师兄帮不了你，找师兄师姐，到时、自行找服务器商或者其他售后人员解决。</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/07/23/ex00_v3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/23/ex00_v3/" class="post-title-link" itemprop="url">Ex00 为什么是"The Hard Way"</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-23 02:06:48" itemprop="dateCreated datePublished" datetime="2022-07-23T02:06:48-04:00">2022-07-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-07-24 10:13:26" itemprop="dateModified" datetime="2022-07-24T10:13:26-04:00">2022-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/07/23/ex00_v3/" class="post-meta-item leancloud_visitors" data-flag-title="Ex00 为什么是"The Hard Way"" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/07/23/ex00_v3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/07/23/ex00_v3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1）为什么Hard？"><a href="#1）为什么Hard？" class="headerlink" title="1）为什么Hard？"></a>1）为什么Hard？</h2><p>现如今浮躁的科研圈，社会风气下，速成思想，快餐文化害死人，图快的读者中，就有很多来自做实验的。现在大家普遍认为：实验+计算很好发文章。两者结合可以更深入地理解你的研究体系，发现并解决科研中有价值的科学问题。但很多老师却感觉计算就是动动鼠标，操作个软件的活，是个人就能做计算似的。在这种错误的理解，对计算难度过分低估，在高IF文章的诱惑下，安（suan）排（ji）自己的学生去搞计算。写到这里，很多脏话硬生生从嗓子眼憋回去了。骂是解决不了问题的。那么我们就理一理，一个实验的课题组，在没有任何计算背景的条件下，安（Po）排（Hai）一个学生做计算所遇到的问题吧：</p>
<ul>
<li>计算软件的选择：大千世界无奇不有，计算的软件也是多得数不过来，每个软件都有自己适用的体系，哪个更适合你的体系，你不会选择；</li>
<li>软件的购买：比如你决定了使用VASP，你需要找代理商购买软件（有些还很贵，舍不得买，用盗版的，发文章的时候还担心版权问题）；</li>
<li><p>服务器的购买：买了软件我们要安装啊。你可能说，这个容易，直接买几台电脑装上就可以了。这里的问题在于：用台电脑就可以算，就可以发文章的时代造就过去了，你可能被淘汰十几年了。所以，</p>
<ul>
<li>要买服务器，但服务器价格不菲，怎么选你也不知道；</li>
<li>不买服务器，可以买超算中心的机时啊。好吧，就当这一关也过了。</li>
</ul>
</li>
<li><p>软件安装：这也是个麻烦事。计算软件不是QQ，也不是360安全卫士，不是你下载个exe文件双击选择d盘就可以傻瓜式安装成功的。各种环境变量，依赖的库都是需要自己安装的。要不然那么多培训班上来就先给大家介绍软件是怎么安装的呢。</p>
</li>
<li><p>熟悉Linux系统：计算软件大部分都是在Linux系统下安装的，所以Linux系统的一些常用命令操作你得学会；而Linux的桌面之所以不如Windows，用户习惯是个难以突破的瓶颈，在没人陪伴的情况下，自己熟练Linux系统也是非常不易；</p>
</li>
<li>软件学习：这也是本书的重点，纯做计算的菜鸟，每天屁活都不干，就看本书，Linux系统下操练，有人指导的情况下差不多2个月能入门。对号入座，你一个做实验的，每天捣鼓设备，转转反应，就快累的嗝屁了，恨不得回到家或者宿舍就躺着歇会，还要跟朋友出去嗨，陪对象逛，当然还要玩把王者农药。真的能抽出时间来认真学习么？</li>
<li>有些体系对软件参数依赖性很强，没人指导，你不会设置，软件出错不会解决，计算结果不会分析，算对算错都不知道，迷迷糊糊就这样得到了一些结果。</li>
<li>计算的目的，肯定要跟实验对比啊？怎么对比，从哪方面下手，又没头绪，很多时候都是硬凑，结论反了也傻呵呵地跟别人说实验和理论吻合地很好，可以冲个大文章。</li>
<li>折腾完了，要投文章了。因为计算太烂，XJB乱扯结论而被直接拒掉的又有一批；</li>
<li>好不容易送审了， 最好去烧烧香，祈求不要落到做计算的人手里。真落到计算的人手里，算的太烂，也是很有可能因此丧命或者大修。</li>
<li>就当你运气好，大修了。审稿人抛出来的专业计算问题你可能又答不上来，怎么补数据都无从下手。</li>
<li>让你再幸运一把，补上数据，文章接受了。</li>
<li>那下一篇还这样弄么？ 可以，但经过上面的折腾，小硕士估计要毕业了，小博士也要滚蛋了。又得找下一个垫背的，也就是因为这样，上一批的不知对和错的经验就传授给了下一代。</li>
<li>总结：一个做实验的老师，不把自己在实验方面的专长传授给自己的学生，硬让人家自己去琢磨你什么都不懂的领域，最后造就了一个四不像的怪物出来，何为师道？</li>
</ul>
<p>这种情况到底怎么办？ 很多人在的课题组都是做实验的，老板头脑发热的时候，就安排做起了计算。但老板除了一颗乐观的心，屁都不懂啊。这时候的你，除非脑子很好用，否则就会陷入一种叫天天不应，叫地地不灵的境界。在这里,大师兄建议你：</p>
<ul>
<li>说服老板，找个计算靠谱的组，合作一下，避免自己直接算，自己专心做实验，计算可以跟国内相关领域的老师合作一下，各取所长。</li>
<li>说服不了，找个计算靠谱的组，让老板派你去交流学习一段时间，别自己在那里瞎捣鼓。</li>
<li>认真学习本书，看VASP的手册，以及各种网站上的教程，先摸索一阵子再算老板给你的体系。</li>
<li>总之，时间和精力的成本，自己心里要有个数。</li>
</ul>
<p>在这里还要吐槽2点：</p>
<ul>
<li>有些做实验的跟计算合作，挂名的时候把计算放到不起眼位置的人，随意挪动计算作者的顺序，甚至是放到了通讯位置上，但没加*。生活不易，给做计算的留条活口，也给自己留个好名声。</li>
<li>有些跟实验合作的计算工作者，随随便便优化个结构，做个漂亮的图就完事。只做锦上添花工作，而不深入研究课题机理。做计算的日子本来就难，请不要因为自己的不专业坏了计算的名声。</li>
<li>如果想合作，就双方正儿八经地合作，真正意义的合作至少是通过计算解决了课题中的难点，机理，有助于组里课题的下一步进行，更高级点是实验验证了计算的假设，不过能做到这种程度的也没多少课题组。而对于这种良性的合作，实验和计算都给挂个一作，双方老板都挂个通讯，也无可厚非。</li>
<li>不想合作，非让自己的学生做计算。这种情况就不要怕花钱，派学生到做计算的课题组学习上一两个月，然后再回来继续搞。如果有需要，也可以派出去参加参加一些高质量的培训班，暑期学校等，来弥补自己在学生指导方面的不足。</li>
</ul>
<p>虽然书名叫The hard Way，这本书还是给了很多人一种DFT极品快餐的感觉；更会越来越”毁了”专业做计算的，让各种做实验的做计算的扰乱市场。虽然有这种负面的作用，但我还是想尽自己可能，稍微提高我们做计算的平均水平。因此，<strong>认真声明一下</strong>：本教程的初衷是给专门做计算菜鸟准备的。对于那些以为靠本书就可以快速入门的筒子们（不管是做计算还是做实验的），劝你们还是趁早放弃本书的学习，科研的路上，从来就没有速成二字。</p>
<p>在BB了这么多废话之后，感觉时候再强调下本书的重点了：The Hard Way。The Hard Way 在本人的眼里，类似于书山有路勤为径，学海无涯苦作舟的感觉，类似于经过无数瞎折腾终于尝到一点点小胜利甜头的感觉，类似于苦尽甘来，柳暗花明又一村的感觉。所以：Hard Way是本书的重点，也是痛苦学习的一个过程。别人耗费精力和时间开发出来的软件，短时间就精通是不可能的事情。所以，也别指望着一口气吃成个胖子，耐住寂寞。 </p>
<p>本人学习和使用VASP已经快10年了，该教程差不多也5岁了。我进入课题组之前，不会用Ubuntu系统，也不会用脚本，也不会用python写脚本，也没用过VASP。我的VASP入门，是花了一个月看了Davide Sholl的书后，老板又手把手花了一个多月的时间学会的，学习的资料是老版本的Hand on Session系列。每天做的是系列中的练习，准备老板布置的作业，思考老板预留的问题，然后第二天听老板解释每个参数的含义，里面的关键点。而真正操作起来进入课题的时候，又有组里细心的博后专门帮忙指导答疑，也有很多人可以进行讨论学习。写这么多并不是在秀自己遇到了一个多好的老板，多好的课题组。在这样的环境中，经过了四年的学习，好几个课题的实战，才变成你们感觉很牛逼的大师兄（其实我只是经验比你们多一点点而已）。而这本书，也是本人这四年来学习到的精华，每一节都要花费差不多4个小时的样子才能完成，或者更多。而这四年的精华，岂能让你把这本书看一遍就掌握了?  到现在为止，瞎BB了76节。每节你花一天的时间去学习，加上其他参考书的学习，也需要2个月的时间。而2个月，对一个新手来说，完全在承受范围之内，<strong>请相信时间的力量</strong>。这里，我们澄清下对新手的定义：全职搞计算的菜鸟。所以，Hard Way 就是需要你花掉每一个整天的时间，一点点认真琢磨，反复操练，绝对不是什么速成。而现在我们搞科研都很浮躁，什么都喜欢图快，我们也有句古话：欲速则不达。因此，打算朝夕之内就学会VASP的读者，本书可能真的不适合你。</p>
<h2 id="2）-计算-转行？"><a href="#2）-计算-转行？" class="headerlink" title="2） 计算 = 转行？"></a>2） 计算 = 转行？</h2><ul>
<li>很多人吐槽计算化学是个坑告诉你，既然选择了这条路，就准备改行吧。请避开这些负能量的说法，拿出自己的主见。无论放弃或者坚持，都要拿出你自己的判断力出来，请不要再听别人在你耳边瞎磨。也就是我的人生我做主。</li>
<li>每一行的人都会说自己这一行是个坑，不管你怎么跳，都是坑。引用我老婆的原话：之前带两个孩子的时候，感觉自己每天都很累，现在孩子父母帮忙看着，自己工作了，但每天还是很累。美好的生活，累总是一路同行。</li>
<li>个人的理解是，学习理论计算可以使你的视野更加开阔，思维方式更加灵活，对事物本质的把握和理解上，比别人要更胜一筹。也就是一眼就能找到问题的关键所在。不论是否继续相关的研究，转行与否，对今后的发展总会有所帮助。当然，我这个穷酸书生说的话，大家也可以一笑了之。</li>
</ul>
<h2 id="3-心态"><a href="#3-心态" class="headerlink" title="3 心态"></a>3 心态</h2><h3 id="主动行动、思考"><a href="#主动行动、思考" class="headerlink" title="主动行动、思考"></a>主动行动、思考</h3><p>前面说的都没有阻挡你继续学习vasp的脚步，那么首先要注意的就是自己的心态：学习过程中要时刻抱着<strong>主动</strong>的心态去解决问题。</p>
<ul>
<li>遇到不会的问题,<strong>主动</strong>去查找解决方法;</li>
<li>遇到不懂的基础知识,<strong>主动</strong>去找教科书;</li>
<li>遇到什么好的资源,书籍,课件等,<strong>主动</strong>去网上搜索,下载;</li>
<li>本书中的练习，看到别人有意思的计算，<strong>主动</strong>去重复重复。</li>
<li>没事就<strong>主动</strong>去官网溜达,</li>
<li>VASP计算出错，<strong>主动</strong>去google或者官网的论坛找答案! </li>
</ul>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a><strong>注意</strong></h4><ul>
<li><p>上面说的<strong>主动</strong>是对于你自己来说的，别碰到不会的就主动求助别人，这样你很难得到提升。</p>
</li>
<li><p>去google搜索遇到的问题，也就意味着你要学会科学上网。</p>
</li>
<li><p>如果遇到热心帮你解决问题的人，好好准备你的问题，千万不要一个劲的追问，因为这样显得你不动脑子，非常惹人烦。</p>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结:"></a><strong>总结:</strong></h2><ul>
<li><p>学习VASP所具有的心态：</p>
<ul>
<li>主动去面对遇到的问题和困难，冰冻三尺,非一日之寒，遇到问题，主动解决，日积月累就会收获良多；</li>
<li>对自己要有自信，即使自己是彻头彻底的小白,也不必要担心。相对于那些积累了很多错误经验的人来说，什么都不知道则具有更好的可塑性。</li>
<li>不要盲目相信他人，有自己的理解。如果你在网上搜索问题的答案，会找到很多人的回答，但实际熵很多人水平都可能没有你高，而你却把他们的话当成真理一般去相信，这是致命的。</li>
</ul>
</li>
<li><p>大师兄的要求：</p>
<ul>
<li><p>新手认真阅读序言里面推荐的那本参考书；</p>
</li>
<li><p>尽可能多地浏览VASP官网，对某些参数有疑惑，认真查阅手册；</p>
</li>
<li><p>最重要的是不要偷懒，遇到不会的东西或者困难，立刻记下来或者去解决，否则明天你就会忘掉；</p>
</li>
<li><p>好东西要学会分享，可以在QQ群里分享自己的心得，帮助其他正在入门的小师弟，妹们。</p>
</li>
</ul>
</li>
</ul>
<h2 id="致谢："><a href="#致谢：" class="headerlink" title="致谢："></a><strong>致谢：</strong></h2><p>本教程在写作的过程中，得到了很多人的支持。 有些地方可能描述不清，当然书里面也肯定避免不了错误的出现，也收到了很多人的建议和批评指正。在这里，向他们表示诚挚的谢意。很多人认为，通过这个教程，学到了很多东西，但请不要过分把功劳归在我身上。引用佛系的观点：<strong>因果，完全是自作自受</strong>。你自己学习了，自己认真练习了，水平的提高完全是你自己辛苦付出的结果。<strong>教程就在这里，你学或者不学，都跟我没有关系。</strong>私以为，收获最大的还是本人。一方面把自己多年的学习的经验整理总结出来，另一方面，很多当时一知半解的地方，在写作的过程中，通过查阅资料，认真分析得到了解决。</p>
<p>教程的宗旨在于快速带领大家入门VASP的使用，这里大师兄想起了金庸笔下的打狗棒法， 本书传授的只是招式，而心法口诀则是你扎实的科研基础功，是自己这些年（高中，大学，硕士，博士）通过坚持不懈学习来积累获得的，对次，本人确实无能为力，而这一点也恰恰是我们最欠缺的部分，希望可以引起大家的重视，在等待任务结束的时候，多多补习自己的基础知识。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/07/18/ex00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/07/18/ex00/" class="post-title-link" itemprop="url">Ex00 为什么是"The Hard Way"</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-07-18 02:06:48" itemprop="dateCreated datePublished" datetime="2022-07-18T02:06:48-04:00">2022-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-07-23 18:52:07" itemprop="dateModified" datetime="2022-07-23T18:52:07-04:00">2022-07-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/07/18/ex00/" class="post-meta-item leancloud_visitors" data-flag-title="Ex00 为什么是"The Hard Way"" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/07/18/ex00/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/07/18/ex00/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h6 id="在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。-化学的基本知识如果没有掌握，不建议学习本书。"><a href="#在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。-化学的基本知识如果没有掌握，不建议学习本书。" class="headerlink" title="在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。 化学的基本知识如果没有掌握，不建议学习本书。"></a>在学习本书时，大师兄们会默认读者掌握了一些基本的电脑操作技能，以及化学的基本常识（结构化学，物理化学等）。本章列举出一些常用的计算工具和软件，以及假设大家掌握的一些技能。如果没有达到基本的要求，那么请在学习前面几章的同时，抓紧提升自己的能力。 化学的基本知识如果没有掌握，不建议学习本书。</h6><h2 id="1-心态"><a href="#1-心态" class="headerlink" title="1 心态"></a>1 心态</h2><h3 id="主动行动、思考"><a href="#主动行动、思考" class="headerlink" title="主动行动、思考"></a>主动行动、思考</h3><p>学习过程中要时刻抱着<strong>主动</strong>的心态去解决问题。</p>
<ul>
<li>遇到不会的问题,<strong>主动</strong>去查找解决方法;</li>
<li>遇到不懂的基础知识,<strong>主动</strong>去找教科书;</li>
<li>遇到什么好的资源,书籍,课件等,<strong>主动</strong>去网上搜索,下载;</li>
<li>本书中的练习，看到别人有意思的计算，<strong>主动</strong>去重复重复。</li>
<li>没事就<strong>主动</strong>去官网溜达,</li>
<li>VASP计算出错，<strong>主动</strong>去google或者官网的论坛找答案!</li>
</ul>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a><strong>注意</strong></h4><ul>
<li>上面说的<strong>主动</strong>是对于你自己来说的，别碰到不会的就主动求助别人，这样你很难得到提升。</li>
<li>去google搜索遇到的问题，也就意味着你要学会科学上网。</li>
<li>如果遇到热心帮你解决问题的人，好好准备你的问题，千万不要一个劲的追问，因为这样显得你不动脑子，非常惹人烦。</li>
</ul>
<h2 id="2-操作系统"><a href="#2-操作系统" class="headerlink" title="2  操作系统"></a>2  <strong>操作系统</strong></h2><p>做计算，有三个操作系统可以选择：</p>
<ul>
<li><p>Windows 系统：会使用Windows系统:会开机，打字，安装软件;</p>
</li>
<li><p>Linux 系统，强烈推荐，大师兄本人一直用的是Ubuntu，但不局限于Ubuntu系统，自己喜欢什么就用什么。</p>
</li>
<li><p>Mac系统，兼顾Windows和Linux，一般比较贵，经济条件允许，也可以。</p>
</li>
</ul>
<h5 id="给重点照顾对象：Windows用户的第一个提醒："><a href="#给重点照顾对象：Windows用户的第一个提醒：" class="headerlink" title="给重点照顾对象：Windows用户的第一个提醒："></a>给重点照顾对象：Windows用户的第一个提醒：</h5><p>Windows用户在进行计算的时候，只要计算出错了，就要本能地记起第一个解决的办法： dos2unix 。 这个命令干什么的不要紧，先死死记住即可。</p>
<h2 id="3-文本编辑工具"><a href="#3-文本编辑工具" class="headerlink" title="3 文本编辑工具"></a>3 <strong>文本编辑工具</strong></h2><p>文本编辑工具主要用来编辑，查看VASP的输入（出）文件，要求会打开文件，打字，保存文件。</p>
<h3 id="1）vim"><a href="#1）vim" class="headerlink" title="1）vim"></a>1）<a target="_blank" rel="noopener" href="https://www.vim.org/">vim</a></h3><p>这个<strong>必须要学会</strong>，linux下面自带。原因是绝大多数的计算都是在linux下面进行的，学会vim的基本操作可以极大提高你的文字处理能力和工作效率。关于VIM的使用介绍，自己百度下或者搜一搜相关的视频，学习下。</p>
<h3 id="2-notepad"><a href="#2-notepad" class="headerlink" title="2) notepad++"></a>2) <a target="_blank" rel="noopener" href="https://notepad-plus-plus.org/">notepad++</a></h3><ul>
<li>这个是对于Windows用户来说的，要求会创建文件，输入内容并保存文件，<strong>这个软件或者类似的必须学会使用!</strong></li>
</ul>
<p>原因在于：Windows下面自带的记事本保存的文件与linux下的文件格式不匹配，提交任务的时候经常出问题，用notepad++则不会出现这个问题。</p>
<p><strong>因此</strong>，Windows的记事本杜绝使用。为了安全，即使用了notepad++，Windows用户在进行计算的时候，也需要注意下面两点：</p>
<ul>
<li><p>Windows下面编辑的输入文件，如果想在linux服务器上运行，最好先执行: dos2unix 这个命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dos2unix  INCAR</span><br></pre></td></tr></table></figure>
</li>
<li><p>Windows用户计算出错了，一定要首先想到 dos2linux 这个命令来解决问题!!!</p>
</li>
</ul>
<h3 id="3）-Atom"><a href="#3）-Atom" class="headerlink" title="3） Atom"></a>3） <a target="_blank" rel="noopener" href="https://atom.io/">Atom</a></h3><p>这个Atom是文本编辑工具，不是原子的意思。Windows，Linux，Mac系统均可使用。</p>
<h2 id="4-常用建模相关软件"><a href="#4-常用建模相关软件" class="headerlink" title="4 常用建模相关软件:"></a>4 <strong>常用建模相关软件:</strong></h2><p>本书默认大家已经在自己的电脑里安装了下面三个软件：</p>
<h3 id="1-Material-Studio"><a href="#1-Material-Studio" class="headerlink" title="1) Material Studio"></a><strong>1) Material Studio</strong></h3><ul>
<li>这个软件，百度里面一大堆下载链接，安装教程，大家自行下载安装即可。</li>
<li>本书默认大家已经安装成功，会不会使用暂且不要求；</li>
<li>不要问我从哪里下载，安装出现问题也不要找我解决。</li>
</ul>
<h3 id="2）-VESTA"><a href="#2）-VESTA" class="headerlink" title="2）**VESTA**"></a>2）**<a target="_blank" rel="noopener" href="http://jp-minerals.org/vesta/en/">VESTA</a>**</h3><p>来自日本的良心软件，Linux，Windows，Mac系统均可使用。链接：<a target="_blank" rel="noopener" href="http://jp-minerals.org/vesta/en/">http://jp-minerals.org/vesta/en/</a></p>
<ul>
<li><p>Windows下面安装就不再介绍了，下载程序，解压，双击图标即可运行，相信大家都能搞定。</p>
</li>
<li><p>Linux下安装: </p>
<ul>
<li><p>下载binary程序文件，本人解压后放到了&#x2F;opt&#x2F;VESTA-x86_64目录</p>
</li>
<li><p>编辑 ~&#x2F;.bashrc 文件，在文件最后，添加下面2行。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export VESTA=/opt/VESTA-x86_64 </span><br><span class="line">export PATH=&quot;$PATH:$VESTA&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>在终端里面进行的操作如下：第一行打开<del>&#x2F;.bashrc文件, 自己添加上面提到的两行即可，第二行更新下</del>&#x2F;bashrc文件，第三行运行VESTA。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/.bashrc</span><br><span class="line">$ . ~/.bashrc</span><br><span class="line">$ VESTA</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3）p4vasp"><a href="#3）p4vasp" class="headerlink" title="3）p4vasp"></a>3）<a target="_blank" rel="noopener" href="http://www.p4vasp.at/"><strong>p4vasp</strong></a></h3><ul>
<li>链接：<a target="_blank" rel="noopener" href="http://www.p4vasp.at/">http://www.p4vasp.at/</a></li>
</ul>
<ul>
<li><p>Windows版本，好像很久没有更新了，点击此处下载，解压,双击图标即可运行。也可以在大师兄QQ群或者其他QQ群文件中下载。</p>
</li>
<li><p>Linux版本功能更加强大。可以</p>
<p>Ubuntu（18以及更老的版本）用户使用命令一键安装： <strong>sudo apt-get install p4vasp</strong></p>
<p>Ubuntu 20以及后续的安装有些麻烦。p4vasp已经不更新了，很多功能可以用其他的软件替代。如果坚持使用p4vasp，可以联系大师兄付费安装（50块钱）。</p>
</li>
</ul>
<h3 id="4）-ASE"><a href="#4）-ASE" class="headerlink" title="4） ASE"></a>4） <a target="_blank" rel="noopener" href="https://wiki.fysik.dtu.dk/ase/index.html">ASE</a></h3><p>ASE 是Atomic Simulation Environment的缩写，可以实现搭建结构，读取VASP的输入和输出，以及一些后处理功能。如果p4vasp没办法安装，那么ASE必须要安装在你的电脑上。</p>
<h3 id="5）其他软件"><a href="#5）其他软件" class="headerlink" title="5）其他软件"></a>5）其他软件</h3><p>这里说的软件主要是针对VASP计算的模型搭建这一方面，有兴趣的也可以试试<a target="_blank" rel="noopener" href="https://avogadro.cc/">Avogadro</a>. 值得一提的是，我们自己的国产建模软件那是相当得少，更别提计算软件了。而我们比较擅长的是写教程和后处理，然后发公众号割韭菜。</p>
<h2 id="5-服务器相关"><a href="#5-服务器相关" class="headerlink" title="5 服务器相关"></a>5 服务器相关</h2><p>VASP的计算就跟开车一样，设计到很多的内容，比如大街上的路怎么铺的？桥怎么建的？发动机怎么工作的？方向盘怎么工作的，刹车片什么材料做的？车身颜色怎么喷的？ 没有人会懂所有相关的知识。但是怎么打开车门，坐车里，启动发动机，踩油门，打方向盘，这是本教程所关心的，也就是类似驾校教练指导你学会如何开车，而不是关系如何去造车，去铺路。这里的车就是VASP。其他相关的不做详细介绍。</p>
<h3 id="1-知道怎么连接自己组内或者租赁的服务器"><a href="#1-知道怎么连接自己组内或者租赁的服务器" class="headerlink" title="1) 知道怎么连接自己组内或者租赁的服务器;"></a>1) 知道怎么连接自己组内或者租赁的服务器;</h3><h3 id="2-初步学习使用基本的linux命令"><a href="#2-初步学习使用基本的linux命令" class="headerlink" title="2) 初步学习使用基本的linux命令:"></a>2) 初步学习使用基本的linux命令:</h3><ul>
<li><p>进入目录 : cd </p>
</li>
<li><p>移动文件(夹): mv </p>
</li>
<li><p>复制文件: cp </p>
</li>
<li><p>复制文件夹用: cp -r ; 注意 cp 和 -r 之间有个或者N个空格</p>
</li>
<li><p>创建文件夹:mkdir     </p>
</li>
<li><p>删除文件: rm ;    </p>
</li>
<li><p>删除文件夹: rm  -r    </p>
</li>
<li><p>强制删除文件夹: rm -fr  或者 rm -rf  (f 和 r 的顺序可以颠倒 )        </p>
</li>
<li><p>显示目录下文件: ls 等命令;   </p>
</li>
<li><p>这里大师兄就不再啰嗦了，后面教程里会介绍一些命令的使用，老司机们自动略过，新手自行百度：linux 命令，你会得到铺天盖地的信息。</p>
</li>
</ul>
<h3 id="3-手上有可以正常运行的VASP程序"><a href="#3-手上有可以正常运行的VASP程序" class="headerlink" title="3) 手上有可以正常运行的VASP程序"></a>3) 手上有可以正常运行的VASP程序</h3><ul>
<li><p>组里面已经安装好vasp程序，或者使用超算中心的VASP程序，只要手上有可以正常运行的VASP即可。因为我们在本书里，<strong>不讨论</strong>：</p>
<ul>
<li>去哪里下载VASP? 怎么安装VASP? 去哪里下载VASP的pseudo potentials?</li>
</ul>
<ul>
<li>前面的问题可以在QQ群里面讨论，也可以付费求助别人解决。</li>
<li>对于VASP的pseudo potentials，也就是POTCAR。<ul>
<li>你老板买了VASP的版权，就直接问他要。</li>
<li>用的盗版VASP，找其他人要一份，但是发文章的时候会很麻烦。国内很多人都是找有版权的老师挂名，其实这是非常学术不道德的事情。一方面涉及到版权，一方面涉及到瞎几把挂名。</li>
<li>免费的可以用QE，CP2K，GPAW等开源的软件，没必要非得在VASP上面死磕。</li>
</ul>
</li>
</ul>
</li>
<li><p>知道怎么提交VASP任务？</p>
<ul>
<li>自己组里都有提交任务的脚本，如果没有的话,</li>
<li><ul>
<li><ol>
<li>找组里的师兄师姐帮忙;</li>
</ol>
</li>
</ul>
<ol>
<li>第一个啃螃蟹的人，找老师解决，求助服务器商，求助超算管理员；</li>
<li>自行动手解决。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="6-程序语言学习"><a href="#6-程序语言学习" class="headerlink" title="6 程序语言学习"></a>6 <strong>程序语言学习</strong></h2><p>建议大家学习两个语言: bash 和 python。主要是为了辅助计算，节省时间，并拓展自己的思维方式。</p>
<ul>
<li>bash语言：日常terminal里面常用的基本命令，比如cd，ls这些，以及结合基本的逻辑语法，可以让你写出一些简单的小脚本，提高自己的工作效率；</li>
<li>Python 语言：python是一款语法简单，很容易上手的程序，有着丰富的数据库支持，目前深受科研人员的喜爱。<strong>注意</strong>，这里我们不讨论类似：python是一门高级语言，运行的时候跟机器交互性差，需要时间比C++长这样的问题。因为这是专业程序员的事。不出意外，看这本书的大部分人，能够用python写个小脚本，方便地处理自己的任务和数据，就已经非常棒了，快和慢，对于我们来说，顶死了也就几秒的问题，完全可以接受。</li>
<li>学习程序语言，一方面可以极大地提高自己的工作效率，另一方面也可以改变自己看待事物的思维方式。  </li>
<li>如果不喜欢Python，当然也可以学习其他的程序语言，C++，R等。</li>
</ul>
<h2 id="7-吐槽"><a href="#7-吐槽" class="headerlink" title="7 吐槽"></a>7 吐槽</h2><p>速成思想，快餐文化害死人，图快的读者中，就有很多来自做实验的。现在大家普遍认为：实验+计算很好发文章。两者结合可以更深入地理解你的研究体系，发现并解决科研中有价值的科学问题。但很多老师却感觉计算就是动动鼠标，操作个软件的活，是个人就能做计算似的。在这种错误的理解，对计算难度过分低估，在高IF文章的诱惑下，安（suan）排（ji）自己的学生去搞计算。写到这里，很多脏话硬生生从嗓子眼憋回去了。骂是解决不了问题的。那么我们就理一理，一个实验的课题组，在没有任何计算背景的条件下，安（Po）排（Hai）一个学生做计算所遇到的问题吧：</p>
<ul>
<li><p>计算软件的选择：大千世界无奇不有，计算的软件也是多得数不过来，每个软件都有自己适用的体系，哪个更适合你的体系，你不会选择；</p>
</li>
<li><p>软件的购买：比如你决定了使用VASP，你需要找代理商购买软件（有些还很贵，舍不得买，用盗版的，发文章的时候还担心版权问题）；</p>
</li>
<li><p>服务器的购买：买了软件我们要安装啊。你可能说，这个容易，直接买几台电脑装上就可以了。这里的问题在于：用台电脑就可以算，就可以发文章的时代造就过去了，你可能被淘汰十几年了。所以，</p>
<ul>
<li>要买服务器，但服务器价格不菲，怎么选你也不知道；</li>
<li>不买服务器，可以买超算中心的机时啊。好吧，就当这一关也过了。</li>
</ul>
</li>
<li><p>软件安装：这也是个麻烦事。计算软件不是QQ，也不是360安全卫士，不是你下载个exe文件双击选择d盘就可以傻瓜式安装成功的。各种环境变量，依赖的库都是需要自己安装的。要不然那么多培训班上来就先给大家介绍软件是怎么安装的呢。</p>
</li>
<li><p>熟悉Linux系统：计算软件大部分都是在Linux系统下安装的，所以Linux系统的一些常用命令操作你得学会；而Linux的桌面之所以不如Windows，用户习惯是个难以突破的瓶颈，在没人陪伴的情况下，自己熟练Linux系统也是非常不易；</p>
</li>
<li><p>软件学习：这也是本书的重点，纯做计算的菜鸟，每天屁活都不干，就看本书，Linux系统下操练，有人指导的情况下差不多2个月能入门。对号入座，你一个做实验的，每天捣鼓设备，转转反应，就快累的嗝屁了，恨不得回到家或者宿舍就躺着歇会，还要跟朋友出去嗨，陪对象逛，当然还要玩把王者农药。真的能抽出时间来认真学习么？</p>
</li>
<li><p>有些体系对软件参数依赖性很强，没人指导，你不会设置，软件出错不会解决，计算结果不会分析，算对算错都不知道，迷迷糊糊就这样得到了一些结果。</p>
</li>
<li><p>计算的目的，肯定要跟实验对比啊？怎么对比，从哪方面下手，又没头绪，很多时候都是硬凑，结论反了也傻呵呵地跟别人说实验和理论吻合地很好，可以冲个大文章。</p>
</li>
<li><p>折腾完了，要投文章了。因为计算太烂，XJB乱扯结论而被直接拒掉的又有一批；</p>
</li>
<li><p>好不容易送审了， 最好去烧烧香，祈求不要落到做计算的人手里。真落到计算的人手里，算的太烂，也是很有可能因此丧命或者大修。</p>
</li>
<li><p>就当你运气好，大修了。审稿人抛出来的专业计算问题你可能又答不上来，怎么补数据都无从下手。</p>
</li>
<li><p>让你再幸运一把，补上数据，文章接受了。</p>
</li>
<li><p>那下一篇还这样弄么？ 可以，但经过上面的折腾，小硕士估计要毕业了，小博士也要滚蛋了。又得找下一个垫背的，也就是因为这样，上一批的不知对和错的经验就传授给了下一代。</p>
</li>
<li><p>总结：一个做实验的老师，不把自己在实验方面的专长传授给自己的学生，硬让人家自己去琢磨你什么都不懂的领域，最后造就了一个四不像的怪物出来，何为师道？</p>
</li>
</ul>
<p>这种情况到底怎么办？ 很多人在的课题组都是做实验的，老板头脑发热的时候，就安排做起了计算。但老板除了一颗乐观的心，屁都不懂啊。这时候的你，除非脑子很好用，否则就会陷入一种叫天天不应，叫地地不灵的境界。在这里,大师兄建议你：</p>
<ul>
<li>说服老板，找个计算靠谱的组，合作一下，避免自己直接算，自己专心做实验，计算可以跟国内相关领域的老师合作一下，各取所长。</li>
<li>说服不了，找个计算靠谱的组，让老板派你去交流学习一段时间，别自己在那里瞎捣鼓。</li>
<li>认真学习本书，看VASP的手册，以及各种网站上的教程，先摸索一阵子再算老板给你的体系。</li>
<li>总之，时间和精力的成本，自己心里要有个数。</li>
</ul>
<p>在这里还要吐槽2点：</p>
<ul>
<li>有些做实验的跟计算合作，挂名的时候把计算放到不起眼位置的人，随意挪动计算作者的顺序，甚至是放到了通讯位置上，但没加*。生活不易，给做计算的留条活口，也给自己留个好名声。</li>
<li>有些跟实验合作的计算工作者，随随便便优化个结构，做个漂亮的图就完事。只做锦上添花工作，而不深入研究课题机理。做计算的日子本来就难，请不要因为自己的不专业坏了计算的名声。</li>
<li>如果想合作，就双方正儿八经地合作，真正意义的合作至少是通过计算解决了课题中的难点，机理，有助于组里课题的下一步进行，更高级点是实验验证了计算的假设，不过能做到这种程度的也没多少课题组。而对于这种良性的合作，实验和计算都给挂个一作，双方老板都挂个通讯，也无可厚非。</li>
<li>不想合作，非让自己的学生做计算。这种情况就不要怕花钱，派学生到做计算的课题组学习上一两个月，然后再回来继续搞。如果有需要，也可以派出去参加参加一些高质量的培训班，暑期学校等，来弥补自己在学生指导方面的不足。</li>
</ul>
<p>虽然书名叫The hard Way，这本书还是给了很多人一种DFT极品快餐的感觉；更会越来越”毁了”专业做计算的，让各种做实验的做计算的扰乱市场。虽然有这种负面的作用，但我还是想尽自己可能，稍微提高我们做计算的平均水平。因此，<strong>认真声明一下</strong>：本教程的初衷是给专门做计算菜鸟准备的。对于那些以为靠本书就可以快速入门的筒子们（不管是做计算还是做实验的），劝你们还是趁早放弃本书的学习，科研的路上，从来就没有速成二字。</p>
<h2 id="8-计算-x3D-转行？"><a href="#8-计算-x3D-转行？" class="headerlink" title="8 计算 &#x3D; 转行？"></a>8 计算 &#x3D; 转行？</h2><ul>
<li>很多人吐槽计算化学是个坑告诉你，既然选择了这条路，就准备改行吧。请避开这些负能量的说法，拿出自己的主见。无论放弃或者坚持，都要拿出你自己的判断力出来，请不要再听别人在你耳边瞎磨。也就是我的人生我做主。</li>
<li>每一行的人都会说自己这一行是个坑，不管你怎么跳，都是坑。引用我老婆的原话：之前带两个孩子的时候，感觉自己每天都很累，现在孩子父母帮忙看着，自己工作了，但每天还是很累。美好的生活，累总是一路同行。</li>
<li>个人的理解是，学习理论计算可以使你的视野更加开阔，思维方式更加灵活，对事物本质的把握和理解上，比别人要更胜一筹。也就是一眼就能找到问题的关键所在。不论是否继续相关的研究，转行与否，对今后的发展总会有所帮助。当然，我这个穷酸书生说的话，大家也可以一笑了之。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结:"></a><strong>总结:</strong></h2><ul>
<li><p>初学者学习本书,所必须具有的技能:</p>
</li>
<li><ul>
<li>熟练使用一个操作系统；</li>
<li>会编辑文本，写入和保存文件；</li>
<li><ul>
<li><strong>Windows 用户Notepad++必须掌握</strong>,</li>
<li>linux用户可以vim或者其他编辑器，比如Atom</li>
</ul>
</li>
<li>安装好或者会初步使用一款建模软件。-<ul>
<li>**p4vasp **安装在Windows和Ubuntu系统上；</li>
<li><strong>VESTA</strong> 安装在Windows，Ubuntu，Mac系统上；</li>
<li><strong>Materials Studio</strong> 安装在Windows上。</li>
</ul>
</li>
<li>会连接服务器，使用的vasp程序并且会提交任务<ul>
<li>这个大师兄帮不了你，自行找服务器商或者其他售后人员解决。</li>
</ul>
</li>
</ul>
</li>
<li><p>所具有的心态：</p>
<ul>
<li>主动去面对遇到的问题和困难，冰冻三尺,非一日之寒，遇到问题，主动解决，日积月累就会收获良多；</li>
<li>对自己要有自信，即使自己是彻头彻底的小白,也不必要担心。相对于那些积累了很多错误经验的人来说，什么都不知道则具有更好的可塑性。</li>
<li>不要盲目相信他人，有自己的理解。如果你在网上搜索问题的答案，会找到很多人的回答，但实际熵很多人水平都可能没有你高，而你却把他们的话当成真理一般去相信，这是致命的。</li>
</ul>
</li>
<li><p>大师兄的要求：</p>
<ul>
<li><p>新手认真阅读序言里面推荐的那本参考书；</p>
</li>
<li><p>尽可能多地浏览VASP官网，对某些参数有疑惑，认真查阅手册；</p>
</li>
<li><p>最重要的是不要偷懒，遇到不会的东西或者困难，立刻记下来或者去解决，否则明天你就会忘掉；</p>
</li>
<li><p>好东西要学会分享，可以在QQ群里分享自己的心得，帮助其他正在入门的小师弟，妹们。</p>
</li>
</ul>
</li>
</ul>
<p>在BB了这么多废话之后，感觉时候再强调下本书的重点了：The Hard Way. The Hard Way 在本人的眼里，类似于书山有路勤为径，学海无涯苦作舟的感觉，类似于经过无数瞎折腾终于尝到一点点小胜利甜头的感觉，类似于苦尽甘来，柳暗花明又一村的感觉。所以：Hard Way是本书的重点，也是痛苦学习的一个过程。别人耗费精力和时间开发出来的软件，短时间就精通是不可能的事情。所以，也别指望着一口气吃成个胖子，耐住寂寞。 </p>
<p>本人学习和使用VASP已经快10年了，该教程差不多也5岁了。我进入课题组之前，不会用Ubuntu系统，也不会用脚本，也不会用python写脚本，也没用过VASP。我的VASP入门，是花了一个月看了Davide Sholl的书后，老板又手把手花了一个多月的时间学会的，学习的资料是老版本的Hand on Session系列。每天做的是系列中的练习，准备老板布置的作业，思考老板预留的问题，然后第二天听老板解释每个参数的含义，里面的关键点。而真正操作起来进入课题的时候，又有组里细心的博后专门帮忙指导答疑，也有很多人可以进行讨论学习。写这么多并不是在秀自己遇到了一个多好的老板，多好的课题组。在这样的环境中，经过了四年的学习，好几个课题的实战，才变成你们感觉很牛逼的大师兄（其实我只是经验比你们多一点点而已）。而这本书，也是本人这四年来学习到的精华，每一节都要花费差不多4个小时的样子才能完成，或者更多。而这四年的精华，岂能让你把这本书看一遍就掌握了?  到现在为止，瞎BB了76节。每节你花一天的时间去学习，加上其他参考书的学习，也需要2个月的时间。而2个月，对一个新手来说，完全在承受范围之内，<strong>请相信时间的力量</strong>。这里，我们澄清下对新手的定义：全职搞计算的菜鸟。所以，Hard Way 就是需要你花掉每一个整天的时间，一点点认真琢磨，反复操练，绝对不是什么速成。而现在我们搞科研都很浮躁，什么都喜欢图快，我们也有句古话：欲速则不达。因此，打算朝夕之内就学会VASP的读者，本书可能真的不适合你。</p>
<h2 id="致谢："><a href="#致谢：" class="headerlink" title="致谢："></a><strong>致谢：</strong></h2><p>本教程在写作的过程中，得到了很多人的支持。 有些地方可能描述不清，当然书里面也肯定避免不了错误的出现，也收到了很多人的建议和批评指正。在这里，向他们表示诚挚的谢意。很多人认为，通过这个教程，学到了很多东西，但请不要过分把功劳归在我身上。引用佛系的观点：<strong>因果，完全是自作自受</strong>。你自己学习了，自己认真练习了，水平的提高完全是你自己辛苦付出的结果。<strong>教程就在这里，你学或者不学，都跟我没有关系。</strong>私以为，收获最大的还是本人。一方面把自己多年的学习的经验整理总结出来，另一方面，很多当时一知半解的地方，在写作的过程中，通过查阅资料，认真分析得到了解决。</p>
<p>教程的宗旨在于快速带领大家入门VASP的使用，这里大师兄想起了金庸笔下的打狗棒法， 本书传授的只是招式，而心法口诀则是你扎实的科研基础功，是自己这些年（高中，大学，硕士，博士）通过坚持不懈学习来积累获得的，对次，本人确实无能为力，而这一点也恰恰是我们最欠缺的部分，希望可以引起大家的重视，在等待任务结束的时候，多多补习自己的基础知识。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/06/22/A32/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/22/A32/" class="post-title-link" itemprop="url">Improved Dimer Method计算过渡态的脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-06-22 15:30:16" itemprop="dateCreated datePublished" datetime="2022-06-22T15:30:16-04:00">2022-06-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-06-23 20:12:23" itemprop="dateModified" datetime="2022-06-23T20:12:23-04:00">2022-06-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/06/22/A32/" class="post-meta-item leancloud_visitors" data-flag-title="Improved Dimer Method计算过渡态的脚本" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/06/22/A32/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/06/22/A32/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天分享一个Improved Dimer Method （IDM）的小脚本。IDM和传统的Dimer方法，NEB一样，都用于优化过渡态。Dimer方法的话，VTST（<a target="_blank" rel="noopener" href="https://theory.cm.utexas.edu/vtsttools/）已经包含很多相关的脚本，咱们就不重复造车了。NEB结合IDM优化过渡态也很高效，成功率非常高，有兴趣的可以尝试下。分享脚本前主要介绍以下几点：">https://theory.cm.utexas.edu/vtsttools/）已经包含很多相关的脚本，咱们就不重复造车了。NEB结合IDM优化过渡态也很高效，成功率非常高，有兴趣的可以尝试下。分享脚本前主要介绍以下几点：</a></p>
<p>1） IDM已经编译在VASP里面了，不需要额外编译。</p>
<p>2） IDM跟平时的优化计算差不多，主要修改IBRION = 44即可。</p>
<p>3） IDM计算主要包括5步：</p>
<p>3.1： 生成初始的过渡态结构：可以有以下三种做法:</p>
<p>3.1.1 经验多的，可以直接手动初步搭一个，保存成<code>POSCAR</code>；</p>
<p>3.1.2 胆儿不大不小小的，可以借助NEB的方法，先准备初末态的结构，然后用VTST的nebmake.pl插点，挑出来接近过渡态结构的POSCAR；</p>
<p>3.1.3 胆儿最小的，可以先NEB跑上30步左右，把能量最高的结构检查下，感觉过渡态结构合理的话，把CONTCAR保存成POSCAR。</p>
<p>3.2：用3.1步中获得的POSCAR做一个频率计算；主要有以下几个注意事项：</p>
<p>3.2.1： NWRITE = 3  一定要注意，必须是3。</p>
<p>3.2.2:  这一步频率计算用不着那么高的精度，差不多就OK。比如我主要做表面催化反应，这一步计算的时候，</p>
<p>i) slab的原子都直接固定住，</p>
<p>ii) 分子大的话只放开对应键断开、生成的原子，分子其他部分都固定住。</p>
<p>iii) gamma点直接算。</p>
<p>这样的话，可以在很快的时间内完成频率计算，得到键断开、生成时过渡态所对应的虚频振动方向。如果有好几个小虚频，不用尝试着去消虚频，因为过渡态结构本来就是一个粗糙的，这里消虚频也没必要；不过一定要有过渡态对应的虚频，如果没有的话，重新搭一个过渡态结构，继续算频率。</p>
<p>3.3 读取频率计算的结果，生成IDM计算的POSCAR。这也是本节中脚本的作用；</p>
<p>3.4 准备IDM计算的INCAR, KPOINTS, POTCAR, 提交任务，等待结束。</p>
<p>3.5 精度稍微高点的频率计算，验证IDM优化出来的过渡态结构。</p>
<p>3.6 以上是正常计算的一个流程，具体细节，大家根据自己情况随机应变，官网的介绍只有一页，很短，一定要认真读一下：<a target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/Improved_Dimer_Method">https://www.vasp.at/wiki/index.php/Improved_Dimer_Method</a></p>
<p>脚本部分：</p>
<p>脚本<a target="_blank" rel="noopener" href="https://github.com/bigbrosci/q-robot/blob/main/actions/get_dimer.py">get_dimer.py</a>可以在我的Github页面下载: <a target="_blank" rel="noopener" href="https://github.com/bigbrosci/q-robot/tree/main/actions。">https://github.com/bigbrosci/q-robot/tree/main/actions。</a> <code>q-robot</code>是本人这些年来计算常用的一些小脚本，有兴趣的也可以全部下载下来。根据自己需求酌情修改使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@author: qli</span><br><span class="line">Created on Thu Jun  2 22:09:18 2022</span><br><span class="line">Creat POSCAR for improved dimer calculations from frequency calculations.</span><br><span class="line">1) run frequency calculation: </span><br><span class="line">IBRION = 5</span><br><span class="line">POTIM = 0.015</span><br><span class="line">NFREE = 2</span><br><span class="line">NWRITE = 3 ### Must be 3</span><br><span class="line">2) run this script:</span><br><span class="line">get_dimer.py </span><br><span class="line">3) use the POSCAR for IDM calc.</span><br><span class="line">NSW = 100           </span><br><span class="line">Prec=Normal</span><br><span class="line">IBRION=44           !  use the dimer method as optimization engine</span><br><span class="line">EDIFFG=-0.05</span><br><span class="line">POTIM = 0.05</span><br><span class="line">    </span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">from ase.io import read, write</span><br><span class="line">import os</span><br><span class="line">from sys import exit</span><br><span class="line"></span><br><span class="line">model = read(&#x27;POSCAR_relax&#x27;) ### POSCAR_relax is the POSCAR before freq calculations, that means some atoms are not fixed.</span><br><span class="line">#model_positions = model.get_positions()</span><br><span class="line">model.write(&#x27;POSCAR_dimer&#x27;, vasp5=True)</span><br><span class="line"></span><br><span class="line"># print(model_positions)</span><br><span class="line"># print(len(model))</span><br><span class="line"></span><br><span class="line">l_start = 0 # the number of line which contains  &#x27;Eigenvectors after division by SQRT(mass)&#x27; </span><br><span class="line">with open(&#x27;OUTCAR&#x27;) as f_in:</span><br><span class="line">    lines = f_in.readlines()</span><br><span class="line">    for num, line in enumerate(lines):</span><br><span class="line">        if &#x27;Eigenvectors after division by SQRT(mass)&#x27; in line:</span><br><span class="line">            l_start = num</span><br><span class="line"></span><br><span class="line">if l_start == 0:</span><br><span class="line">    print(&#x27;&#x27;&#x27;Check Frequency results and then rerun this script.\n**Remember**: NWRITE must be 3. BYEBYE! &#x27;&#x27;&#x27; )</span><br><span class="line">    exit()</span><br><span class="line">    </span><br><span class="line">freq_infor_block = lines[l_start:]        </span><br><span class="line">l_position = 0</span><br><span class="line">wave_num = 0.0</span><br><span class="line">for num, line in enumerate(freq_infor_block): </span><br><span class="line">        if &#x27;f/i&#x27; in line:           </span><br><span class="line">            wave_tem = float(line.rstrip().split()[6])</span><br><span class="line">            if wave_tem &gt; wave_num:</span><br><span class="line">                wave_num = wave_tem  </span><br><span class="line">                l_position = num+2</span><br><span class="line"></span><br><span class="line">pos_dimer = open(&#x27;POSCAR_dimer&#x27;, &#x27;a&#x27;)</span><br><span class="line">pos_dimer.write(&#x27;  ! Dimer Axis Block\n&#x27;)</span><br><span class="line"></span><br><span class="line">vib_lines = freq_infor_block[l_position:l_position+len(model)]</span><br><span class="line">for line in vib_lines:</span><br><span class="line">    infor = line.rstrip().split()[3:]</span><br><span class="line">    pos_dimer.write(&#x27; &#x27;.join(infor)+&#x27;\n&#x27;)</span><br><span class="line"></span><br><span class="line">pos_dimer.close()</span><br><span class="line">print(&#x27;&#x27;&#x27;</span><br><span class="line">      DONE!</span><br><span class="line">      Output file is named as: POSCAR_dimer and can be used for dimer calculations.</span><br><span class="line">      Don&#x27;t forget to rename POSCAR_dimer to POSCAR before you run the dimer jobs.      </span><br><span class="line">      &#x27;&#x27;&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>需要注意的有以下几点：</p>
<p>1） 前面介绍了，频率计算为了图快，我们固定了一些原子。脚本会读取一个<code>POSCAR_relax</code>,也就是没有固定这些原子的结构。用ASE读取，输出一下，保证POSCAR里面的结构干净，避免出错。</p>
<p>2）脚本会读取最大的虚频，然后把它所对应的振动方向附到POSCAR_relax的后面，然后IDM的POSCAR就准备好了。</p>
<p>3）输出为POSCAR_dimer， 计算的时候记得把它改成POSCAR。</p>
<p>4）IDM任务的INCAR在脚本里面有说明，改下IBRION = 44。 剩下的基本跟平时优化是一样的。</p>
<p>5）直接在频率计算的目录里面运行：get_dimer.py 即可。</p>
<p>IDM结合NEB的成功率很高，非常推荐。另外，计算出的结果极少出现多个虚频的情况。因此，这个方法也可以用来消虚频。差不多就这些了，剩下的就是多操作练习，熟能生巧的事情了。欢迎大家分享自己的经验，放到自己的网站，公众号等平台，帮助更多的人解决VASP计算相关的问题，有兴趣的也可以把自己的经验心得放到大师兄网站上，直接给我发邮件即可（lqcata@gmail.com）。</p>
<p><img src="/2022/06/22/A32/qrcode.png" alt=""></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/06/22/A33/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/22/A33/" class="post-title-link" itemprop="url">利用matminer和pymatgen获取material project结构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-06-22 15:30:16" itemprop="dateCreated datePublished" datetime="2022-06-22T15:30:16-04:00">2022-06-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-07-12 23:33:29" itemprop="dateModified" datetime="2022-07-12T23:33:29-04:00">2022-07-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/06/22/A33/" class="post-meta-item leancloud_visitors" data-flag-title="利用matminer和pymatgen获取material project结构" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/06/22/A33/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/06/22/A33/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="首先导入模块"><a href="#首先导入模块" class="headerlink" title="首先导入模块"></a>首先导入模块</h1><p>from matminer.data_retrieval.retrieve_MP import MPDataRetrieval</p>
<h1 id="实例化-MPDataRetrieval-这个类"><a href="#实例化-MPDataRetrieval-这个类" class="headerlink" title="实例化 MPDataRetrieval 这个类"></a>实例化 MPDataRetrieval 这个类</h1><p>mpdr &#x3D; MPDataRetrieval(api_key&#x3D;’qIAww9QnUnXQJO41’)   # 自行查阅自己的api_key</p>
<h1 id="在实例化-MPDataRetrieval-时需要输入用户在-Material-Project-网站的“”-API-Key"><a href="#在实例化-MPDataRetrieval-时需要输入用户在-Material-Project-网站的“”-API-Key" class="headerlink" title="在实例化 MPDataRetrieval 时需要输入用户在 Material Project 网站的“” API Key."></a>在实例化 MPDataRetrieval 时需要输入用户在 Material Project 网站的“” API Key.</h1><p>df &#x3D; mpdr.get_dataframe(criteria&#x3D;{“nelements”: 1,<br>                                  “elements”: {“$in”: [“Cu”]}},<br>                        properties&#x3D;[‘pretty_formula’,’cif’])<br>print(“There are {} entries on MP with 2 element”.format(df[‘pretty_formula’].count())) # 计算有多少材料<br>#请自行关注 df[‘density’].count() 语句，获取Cu金属的各种结构</p>
<h1 id="导入pymatgen-ext-matproj下的MPRester模块"><a href="#导入pymatgen-ext-matproj下的MPRester模块" class="headerlink" title="导入pymatgen.ext.matproj下的MPRester模块"></a>导入pymatgen.ext.matproj下的MPRester模块</h1><p>from pymatgen.ext.matproj import MPRester</p>
<h1 id="实例化-MPRester-这个类"><a href="#实例化-MPRester-这个类" class="headerlink" title="实例化 MPRester 这个类"></a>实例化 MPRester 这个类</h1><p>mpr &#x3D; MPRester(api_key&#x3D;”qIAww9QnUnXQJO41”)  # 自行查阅自己的api_key</p>
<h1 id="获取Cu金属某一结构文件"><a href="#获取Cu金属某一结构文件" class="headerlink" title="获取Cu金属某一结构文件"></a>获取Cu金属某一结构文件</h1><p>data_structure&#x3D;mpr.get_structure_by_material_id(‘mp-1009018’)</p>
<h1 id="利用pymatgen-io-cif下的CifWriter模块导出Cu-cif文件"><a href="#利用pymatgen-io-cif下的CifWriter模块导出Cu-cif文件" class="headerlink" title="利用pymatgen.io.cif下的CifWriter模块导出Cu.cif文件"></a>利用pymatgen.io.cif下的CifWriter模块导出Cu.cif文件</h1><p>from pymatgen.io.cif import CifWriter<br>w &#x3D; CifWriter(data_structure)<br>w.write_file(‘Cu.cif’)</p>
<p><img src="/2022/06/22/A33/A32/qrcode.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/05/23/A31/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/23/A31/" class="post-title-link" itemprop="url">VTST的编译</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-23 15:30:16" itemprop="dateCreated datePublished" datetime="2022-05-23T15:30:16-04:00">2022-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 09:17:30" itemprop="dateModified" datetime="2022-05-24T09:17:30-04:00">2022-05-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/05/23/A31/" class="post-meta-item leancloud_visitors" data-flag-title="VTST的编译" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/05/23/A31/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/05/23/A31/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>VTST的编译并不难，关键主要有2点：</p>
<p>1）VASP能顺利编译</p>
<p>2）VTST编译的时候，严格按照官网的说明一步一步来即可。</p>
<p>为什么要编译VTST，说白了还是VASP自带的功能不强大，没法解决我们的实际计算问题，主要是过渡态结构的搜索。因此，我们需要把VTST的一些功能添加到VASP中。网上可以搜到很多相关的编译教程，这里主要简单介绍下编译的几点注意事项，理清编译的思路，增加成功率。</p>
<p>首先，在编译VTST之前，要确定你顺利编译了VASP。如果这一步你还没搞定，就打算直接编译VTST，会导致你不知道问题从哪里来？是VASP编译的原因呢？还是VTST的原因？另外，VTST编译命令跟VASP是一样的，都是make，只要按照VTST官网的说明，复制文件到指定目录， 修改特定的文件内容，其他的和VASP编译设置一致即可。</p>
<p>其次，一定要看官网。记住，官网永远是学习的第一手资料，很多人喜欢看各种各样的教程，大部分教程都是官网的阉割版。或多或少会丢失些重要的信息，导致出错了不知道怎么解决。</p>
<p>最后，我们介绍下官网的编译说明 (<a target="_blank" rel="noopener" href="https://theory.cm.utexas.edu/vtsttools/installation.html)，大家编译好VASP之后，按照说明一步一步走，基本都能顺利编译VTST到VASP中：">https://theory.cm.utexas.edu/vtsttools/installation.html)，大家编译好VASP之后，按照说明一步一步走，基本都能顺利编译VTST到VASP中：</a></p>
<ol>
<li>第一步当然是下载并解压VTST的程序包喽：(<a target="_blank" rel="noopener" href="https://theory.cm.utexas.edu/vtsttools/download.html">https://theory.cm.utexas.edu/vtsttools/download.html</a>)</li>
</ol>
<p>解压后，发现压缩包里的文件有些令人犯迷糊，简单说明下： VTST提供了对应三种VASP版本编译的文件。</p>
<p>i)  vtstcode5 文件夹里面对应的是VASP5 版本的</p>
<p>ii) vtstcode6.1 文件夹里面对应的是VASP6.1和6.2版本的</p>
<p>iii) vtstcode5 和 vtstcode6.1两个文件夹外面的文件对应的是VASP6.3版本的。</p>
<p>iv) VASP5升级到VASP6不管是6.1还是6.3）要额外花钱，如果你有VASP5的版权，那么就用vtstcode5的文件，VASP5也有很多的子版本，尽量用最新的5.4.4。</p>
<p>v)  VASP6.1/2升级到VASP6.3不花钱，6.3还支持机器学习，所以vtst6.1这个文件夹，直接删掉就OK了，暂不用它，直接搞6.3。</p>
<p><img src="/2022/05/23/A31/Users/qli/Desktop/A31.png" alt=""></p>
<p>2) 编译前的准备：</p>
<p>   i) cp 5.4.4   5.4.4_vtst   &amp;&amp; cd  5.4.4_vtst  </p>
<p>   5.4.4 为已经编译好的VASP目录，这样的话，我们可以用原生的VASP,亦可以用VTST强化过的。另外，这也是对VASP的一个备份；</p>
<p>   ii) 将下载的文件复制到 src文件中： </p>
<p>   ii) 编辑src文件中的main.F 文件</p>
<p>   按照官网的说明，VIM打开src/main.F 文件，找到对应的部分，直接替换即可。 </p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In VTST v2.04 and later, a modification is required in main.F for the solid-state NEB.</span><br><span class="line"></span><br><span class="line">Find and replace:</span><br><span class="line"></span><br><span class="line">CALL CHAIN_FORCE(T_INFO%NIONS,DYN%POSION,TOTEN,TIFOR, &amp;</span><br><span class="line">     LATT_CUR%A,LATT_CUR%B,IO%IU6)</span><br><span class="line">with</span><br><span class="line"></span><br><span class="line">CALL CHAIN_FORCE(T_INFO%NIONS,DYN%POSION,TOTEN,TIFOR, &amp;</span><br><span class="line">     TSIF,LATT_CUR%A,LATT_CUR%B,IO%IU6)</span><br><span class="line">For vasp.6.2 also find and replace:</span><br><span class="line"></span><br><span class="line">IF (LCHAIN) CALL chain_init( T_INFO, IO)</span><br><span class="line">with</span><br><span class="line"></span><br><span class="line">CALL chain_init( T_INFO, IO)</span><br><span class="line">For vasp.6.2.1 you will need vtstcode 4.1 (revision 182). A version of the vtstcode that will work with vasp.6.1.x - vasp.6.2.0 has been saved in the vtstcode6.1 directory.</span><br></pre></td></tr></table></figure>
<p>   <strong>注意</strong>：VASP6.2还需要额外替换一行，至于6.3是不是跟6.2一样？ 可以编译2个版本,一个替换，一个不替换，然后对比下。本人测试的结果是，如果不替换，编译会失败。</p>
<p>   iii) 编辑 src/.objects文件</p>
<p>   先看下官网的说明：</p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">To build the code, the VASP makefile needs to be changed. Find the variable SOURCE, which defines which objects will be built, and add the following objects before chain.o:</span><br><span class="line"></span><br><span class="line">bfgs.o dynmat.o  instanton.o  lbfgs.o sd.o   cg.o dimer.o bbm.o \</span><br><span class="line">fire.o lanczos.o neb.o  qm.o opt.o</span><br><span class="line">The objects dynmat.o, neb.o, dimer.o, lanczos.o, and instanton.o must be in the SOURCE list before chain.o appears. The optimizer objects, sd.o, cg.o, qm.o, lbfgs.o, bfgs.o, and fire.o must appear before the optimizer driver opt.o. Nothing else needs to be done. </span><br></pre></td></tr></table></figure>
<p>   官网里面有句话：Find the variable SOURCE, which defines which objects will be built, and add the following objects before chain.o。</p>
<p>   这里的<code>variable SOURCE</code>指的就是src目录里面的<code>.objects</code>文件，这个文件前面带<code>.</code>，是隐藏的。用VIM或者其他文本编辑软件直接打开编辑就行。</p>
<p>   主要有2点，加粗的<code>Before</code>告诉你怎么改<code>.objects</code>文件：</p>
<p>   1： The objects dynmat.o, neb.o, dimer.o, lanczos.o, and instanton.o must be in the SOURCE list <strong>before</strong> chain.o appears. </p>
<p>   2： The optimizer objects, sd.o, cg.o, qm.o, lbfgs.o, bfgs.o, and fire.o must appear <strong>before</strong> the optimizer driver opt.o. </p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">70         tetweight.o \</span><br><span class="line">71         hamil_rot.o \</span><br><span class="line">72         bfgs.o dynmat.o  instanton.o  lbfgs.o sd.o   cg.o dimer.o bbm.o \</span><br><span class="line">73         fire.o lanczos.o neb.o  qm.o opt.o \</span><br><span class="line">74         chain.o \</span><br></pre></td></tr></table></figure>
<p>   直接复制官网的文本，将72,73行内容放到指定的位置即可(chain.o前面)，不要随便改顺序。</p>
<p>3) 回顾下，1）将VTST的文件复制到src目录里面，2） 修改main.F，3） 修改 .object文件。没有遗漏的话，就可以直接编译了。直接make命令，喝杯咖啡等着即可，下面是本人编译的一些具体命令：<code>5.4.4</code> 是已经编译好的VASP5的目录，VTST（<code>5.4.4_vtst</code>）编译时环境变量的设置跟<code>5.4.4</code>完全一样。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp 5.4.4   5.4.4_vtst  </span><br><span class="line">cd  5.4.4_vtst  </span><br><span class="line">cp ~/Downloads/vtstcode-184/vtstcode5/*  src/</span><br><span class="line">vi src/main.F</span><br><span class="line">vi src/.objects</span><br><span class="line">make </span><br></pre></td></tr></table></figure>
<ol>
<li>确认是否顺利编译，直接运行个例子看看就知道了。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep VTST -A 10 02/OUTCAR</span><br></pre></td></tr></table></figure>
<p>没问题的话则会出现下面的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">VTST: version 3.2, (02/03/18)</span><br><span class="line"></span><br><span class="line"> CHAIN: initializing optimizer</span><br><span class="line"> </span><br><span class="line"> OPT: Using Conjugate-Gradient optimizer</span><br><span class="line"> OPT: CG, Init</span><br><span class="line"> OPT: CG, FDSTEP      0.005000</span><br><span class="line"> OPT: CG, MAXMOVE      0.200000</span><br><span class="line"> </span><br><span class="line"> CHAIN: Read ICHAIN            0</span><br><span class="line"> CHAIN: Running the NEB</span><br></pre></td></tr></table></figure>
<ol>
<li><p>简单总结下：编译VTST主要有以下4个小细节：</p>
<p>i) 前提是顺利编译完成了VASP，这也是最关键的地方。</p>
<p>ii) 下载VTST的code，找到对应VASP版本的文件，并复制到src目录中</p>
<p>iii) 修改src/main.F 文件</p>
<p>iv) 修改src/.objects 文件</p>
</li>
<li><p>欢迎大家分享自己的经验，放到自己的网站，公众号等平台，帮助更多的人解决VTST编译的问题，也可以添加到本文章中 （lqcata@gmail.com）。此外，VTST的Code怎么下载？有没有具体运行的案例？提交任务的命令怎么写？按照这个说明编译失败了，怎么办？这些问题就不要找我了。我相当圣母，可俺是男的。实在没办法，放弃也是个很好的选择。</p>
</li>
</ol>
<p><img src="/2022/05/23/A31/A30/qrcode.png" alt=""></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/04/29/A30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/29/A30/" class="post-title-link" itemprop="url">VASP官方视频</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-29 05:30:16 / 修改时间：23:18:02" itemprop="dateCreated datePublished" datetime="2022-04-29T05:30:16-04:00">2022-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/04/29/A30/" class="post-meta-item leancloud_visitors" data-flag-title="VASP官方视频" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/04/29/A30/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/04/29/A30/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/2022/04/29/A30/fig1.png"></p>
<p>VASP官方在Youtube上开了自己的channel，虽然只有寥寥300多人关注，但也分析了9个视频。下载下来后大约是1G左右。1G只是个嚼头而已。主要内容如下：</p>
<p><img src="/2022/04/29/A30/fig2.png"></p>
<p>1 Advanced_methods_of_molecular_dynamics_VASP_Lecture</p>
<p>2 Basics_of_machine_learning_force_fields_VASP_Lecture</p>
<p>3 Electronic_Convergence_VASP_Lecture</p>
<p>4 Hybrid_functionals_VASP_Lecture</p>
<p>5 Introduction_to_ab_initio_simulation_in_VASP_VASP_Lecture</p>
<p>6 Introduction_to_molecular_dynamics_VASP_Lecture</p>
<p>7 py4vasp_04_release</p>
<p>8 Symmetry_and_sampling_in_reciprocal_space_VASP_Lecture</p>
<p>9 VASP_6.3_release</p>
<p>从图1里面文件大小可以看出来，除了7和9介绍新的后处理工具py4vasp和vasp6.3新版本之外，其他的7个视频都干货满满。不信的话再看看视频的时间，都在1个小时以上，相信对大家学习VASP肯定有帮助。</p>
<p><img src="/2022/04/29/A30/fig3.png"></p>
<p>建议大家关注下VASP的Youtube频道，这么牛逼的软件，才300多号人关注。哈哈。不过得科学上网，没有条件可以通过大师兄分享的网盘链接下载，</p>
<p>下载方式：关注公众号：大师兄科研网，后台回复： youtube   即可。</p>
<p><img src="/2022/04/29/A30/qrcode.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/04/29/A29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/29/A29/" class="post-title-link" itemprop="url">ASE消虚频的小脚本</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-29 00:30:16 / 修改时间：23:17:44" itemprop="dateCreated datePublished" datetime="2022-04-29T00:30:16-04:00">2022-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/04/29/A29/" class="post-meta-item leancloud_visitors" data-flag-title="ASE消虚频的小脚本" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/04/29/A29/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/04/29/A29/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="ASE消虚频的小脚本"><a href="#ASE消虚频的小脚本" class="headerlink" title="ASE消虚频的小脚本"></a>ASE消虚频的小脚本</h4><p>做计算，虚频是令我们又爱又恨的一个东西。结构优化的时候，出现虚频，往往需要我们花费大量的时间和精力去消掉它们，最后搞得精疲力尽。算过渡态的时候，它又不出来，又得折腾个半死才出现。再不幸一些，除了过渡态对应的虚频外，还出现了一个伴生的姐弟虚频，我们又得继续消下去。本节简单介绍一个结构优化时消虚频的小脚本。主要是根据虚频的振动方向将体系中对应原子的坐标进行微调，然后用于重新优化。</p>
<p>简单介绍下原理，先看下VASP的OUTCAR中虚频对应的部分，</p>
<p>1）7220行带有<code>f/i</code>说明有虚频存在，</p>
<p>2） <code>X, Y, Z</code>为体系中原子的坐标，也就是<code>POSCAR</code>中的内容。</p>
<p>3） <code>dx, dy,dz</code>为虚频对应的原子振动方向上的位移。</p>
<p>4）我们将<code>（dx, dy,dz）</code>这个位移乘以一个介于0-1之间的校正因子，然后跟POSCAR中的坐标加起来即可。</p>
<p>5）以z方向为例，校正因子设为0.1，微调后的z方向坐标为： <code>10.709980</code> + <code>（-0.676634）</code> $\times$ <code>0.1</code>  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">7219</span><br><span class="line">7220    3 f/i=    9.313471 THz    58.518262 2PiTHz  310.663930 cm-1    38.517432 meV</span><br><span class="line">7221              X         Y         Z           dx          dy          dz</span><br><span class="line">7222       6.003159 11.629641  6.067545            0           0           0</span><br><span class="line">7223       7.651085  3.894943  9.628260            0           0           0</span><br><span class="line">7224       2.424442  5.785382  9.658882            0           0           0</span><br><span class="line">7225       5.384679  7.755200  0.000000            0           0           0</span><br><span class="line">7226       0.004928  9.643165  0.000000            0           0           0</span><br><span class="line">7227       8.286347  7.755200  0.877073            0           0           0</span><br><span class="line">7228       2.944132  9.643165  0.971480            0           0           0</span><br><span class="line">7229       6.823299  9.643165  1.459420            0           0           0</span><br><span class="line">7230       1.481083  7.755200  1.553827            0           0           0</span><br><span class="line">7231       4.619917  7.755200  2.336493            0           0           0</span><br><span class="line">7232       9.762503  9.643165  2.430900            0           0           0</span><br><span class="line">7233       6.756153  7.724844  3.627352            0           0           0</span><br><span class="line">7234       1.491401  9.684490  3.647528            0           0           0</span><br><span class="line">7235       8.239374  9.666853  5.136018            0           0           0</span><br><span class="line">7236       3.012611  7.740104  5.091365            0           0           0</span><br><span class="line">7237       6.016826  7.737975  6.049788            0           0           0</span><br><span class="line">7238       0.788563  9.668849  6.080188            0           0           0</span><br><span class="line">7239       8.321833  7.730633  7.184644            0           0           0</span><br><span class="line">7240       3.081015  9.671865  7.187374            0           0           0</span><br><span class="line">7241       0.815711  7.728916  8.180983            0           0           0</span><br><span class="line">7242       6.063762  9.648841  8.115270            0           0           0</span><br><span class="line">7243       9.839838  9.660462  8.962566            0           0           0</span><br><span class="line">7244       4.631258  7.730218  9.011537            0           0           0</span><br><span class="line">7245       7.668770  7.725888  9.623941            0           0           0</span><br><span class="line">7246       2.424191  9.657803  9.623832            0           0           0</span><br><span class="line">7247       2.095436  3.874640 10.694551            0           0           0</span><br><span class="line">7248       0.099192 11.590822 10.709980    -0.736317    0.002031   -0.676634</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>脚本内容 (命名为： <code>vib_correct.py</code> )</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Qiang Li</span></span><br><span class="line"><span class="string">Command: python3 vib_correct.py </span></span><br><span class="line"><span class="string">This is a temporary script file.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> ase.io <span class="keyword">import</span> read, write</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取虚频开始行</span></span><br><span class="line">l_position = <span class="number">0</span>  <span class="comment">#虚频振动方向部分在OUTCAR中的起始行数</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;OUTCAR&#x27;</span>) <span class="keyword">as</span> f_in:</span><br><span class="line">    lines = f_in.readlines()</span><br><span class="line">    wave_num = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> num, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(lines):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;f/i&#x27;</span> <span class="keyword">in</span> line:</span><br><span class="line">            wave_tem = <span class="built_in">float</span>(line.rstrip().split()[<span class="number">6</span>])</span><br><span class="line">            <span class="keyword">if</span> wave_tem &gt; wave_num: <span class="comment">#获取最大的虚频</span></span><br><span class="line">                wave_num = wave_tem</span><br><span class="line">                l_position = num+<span class="number">2</span></span><br><span class="line"><span class="comment"># ASE读POSCAR</span></span><br><span class="line">model = read(<span class="string">&#x27;POSCAR&#x27;</span>)</span><br><span class="line">model_positions = model.get_positions()</span><br><span class="line">num_atoms = <span class="built_in">len</span>(model)</span><br><span class="line"><span class="comment">#print(model_positions)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取虚频对应的OUTCAR部分 </span></span><br><span class="line">vib_lines = lines[l_position:l_position + num_atoms] <span class="comment">#振动部分 7222到7248行</span></span><br><span class="line"><span class="comment">#print(vib_lines)</span></span><br><span class="line">vib_dis = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> vib_lines:</span><br><span class="line">    <span class="comment">#model_positions = [float(i) for i in line.rstrip().split()[:3]]</span></span><br><span class="line">    vib_infor = [<span class="built_in">float</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> line.rstrip().split()[<span class="number">3</span>:]] <span class="comment"># dx， dy， dz对应的那三列</span></span><br><span class="line">    vib_dis.append(vib_infor)</span><br><span class="line">vib_dis = np.array(vib_dis) <span class="comment">#将振动部分写到一个array中。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 微调结构</span></span><br><span class="line">new_positions = model_positions + vib_dis * <span class="number">0.4</span> <span class="comment"># 0.4是微调的校正因子，即虚频对应振动位移的0.4，具体多大自己根据经验调。</span></span><br><span class="line">model.positions = new_positions</span><br><span class="line"></span><br><span class="line"><span class="comment">###保存结构</span></span><br><span class="line">write(<span class="string">&#x27;POSCAR_new&#x27;</span>, model, vasp5=<span class="literal">True</span>) <span class="comment"># POSCAR_new是微调后的结构，用于下一步的计算（别忘了把POSCAR_new改成POSCAR）。</span></span><br></pre></td></tr></table></figure>



<p>脚本使用：</p>
<ol>
<li>脚本跟计算文件在同一个目录下：<code>python3  vib_correct.py </code></li>
</ol>
<ol start="2">
<li>如果赋予了脚本可执行权限，并放到了<code>~/bin</code>目录下，直接运行：<code> vib_correct.py</code> 命令即可得到校正后的结构文件：<code>POSCAR_new</code>。</li>
<li>重新计算的时候，新建一个文件夹，把<code>POSCAR_new</code> 复制到文件夹里面，记得把名字改成<code>POSCAR</code>。</li>
<li>这个脚本只适用于普通结构优化时候的虚频。如果过渡态计算的时候出现好几个虚频，不要使用这个脚本，因为脚本默认使用最大虚频对应的位移进行校正。</li>
<li>不用ASE，自己直接写个<code>python</code>脚本也能实现。不过使用ASE可以很方便地获取<code>POSCAR</code>中原子数目，保存原子固定的信息。参考如下。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Qiang Li</span></span><br><span class="line"><span class="string">Command: python3 vib_correct.py</span></span><br><span class="line"><span class="string">This is a temporary script file.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取虚频开始行</span></span><br><span class="line">l_position = <span class="number">0</span>  <span class="comment">#虚频振动方向部分在OUTCAR中的起始行数</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;OUTCAR&#x27;</span>) <span class="keyword">as</span> f_in:</span><br><span class="line">    lines = f_in.readlines()</span><br><span class="line">    wave_num = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> num, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(lines):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;f/i&#x27;</span> <span class="keyword">in</span> line:</span><br><span class="line">            wave_tem = <span class="built_in">float</span>(line.rstrip().split()[<span class="number">6</span>])</span><br><span class="line">            <span class="keyword">if</span> wave_tem &gt; wave_num: <span class="comment">#获取最大的虚频</span></span><br><span class="line">                wave_num = wave_tem</span><br><span class="line">                l_position = num+<span class="number">2</span></span><br><span class="line"><span class="comment"># 读POSCAR</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;POSCAR&#x27;</span>) <span class="keyword">as</span> f_pos:</span><br><span class="line">    lines_pos = f_pos.readlines()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取虚频对应的OUTCAR部分    </span></span><br><span class="line">num_atoms = <span class="built_in">sum</span>([<span class="built_in">int</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> lines_pos[<span class="number">6</span>].rstrip().split()])</span><br><span class="line">vib_lines = lines[l_position:l_position + num_atoms] <span class="comment">#振动部分 7222到7248行</span></span><br><span class="line"></span><br><span class="line">model_positions = []</span><br><span class="line">vib_dis = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> vib_lines:</span><br><span class="line">    position = [<span class="built_in">float</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> line.rstrip().split()[:<span class="number">3</span>]]</span><br><span class="line">    vib_infor = [<span class="built_in">float</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> line.rstrip().split()[<span class="number">3</span>:]] <span class="comment"># dx， dy， dz对应的那三列</span></span><br><span class="line">    model_positions.append(position)</span><br><span class="line">    vib_dis.append(vib_infor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 微调结构</span></span><br><span class="line">model_positions = np.array(model_positions)</span><br><span class="line">vib_dis = np.array(vib_dis) <span class="comment">#将振动部分写到一个array中。</span></span><br><span class="line">new_positions = model_positions + vib_dis * <span class="number">0.4</span> <span class="comment"># 0.4是微调的校正因子，即虚频对应振动位移的0.4，具体多大自己根据经验调。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###保存结构</span></span><br><span class="line">f_out = <span class="built_in">open</span>(<span class="string">&#x27;POSCAR_new&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">f_out.writelines(lines_pos[:<span class="number">8</span>])</span><br><span class="line">f_out.write(<span class="string">&#x27;Cartesian\n&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> new_positions:</span><br><span class="line">    f_out.write(<span class="string">&#x27; &#x27;</span>.join([<span class="built_in">str</span>(coord) <span class="keyword">for</span> coord <span class="keyword">in</span> i]) + <span class="string">&#x27;  F  F  F\n&#x27;</span>)</span><br><span class="line">f_out.close()</span><br></pre></td></tr></table></figure>



<p><img src="/2022/04/29/A29/qrcode.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2022/04/04/A28/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/04/A28/" class="post-title-link" itemprop="url">通过ASE获取原子之间的距离</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-04 00:30:16" itemprop="dateCreated datePublished" datetime="2022-04-04T00:30:16-04:00">2022-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-29 23:17:22" itemprop="dateModified" datetime="2022-04-29T23:17:22-04:00">2022-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2022/04/04/A28/" class="post-meta-item leancloud_visitors" data-flag-title="通过ASE获取原子之间的距离" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/04/04/A28/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/04/04/A28/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="通过ASE获取原子之间的距离"><a href="#通过ASE获取原子之间的距离" class="headerlink" title="通过ASE获取原子之间的距离"></a>通过ASE获取原子之间的距离</h2><p>原子之间的距离是计算化学中模型搭建，结果分析中经常需要分析的部分。而计算原子的之间的距离也非常简单，通过可视化软件直接点两个原子就可以直接显示出来，可以通过自写的一些小脚本来实现。跟均相的体系不同，周期性体系由于周期性边界的存在，有时候模型中两个原子之间的距离需要将周期性边界条件考虑进去才能正确得到。今天简单介绍一个通过ASE获取原子之间的距离，并且考虑周期性边界条件的影响的小脚本。</p>
<h4 id="具体例子展示一下："><a href="#具体例子展示一下：" class="headerlink" title="具体例子展示一下："></a>具体例子展示一下：</h4><p>图里面是$TiO{_2}(101)$表面上吸附的一个Pt单原子模型，如果直接计算Pt和Ti之间距离的话（图1），测量一下为 7.461 $\AA$。实际上我们把slab模型沿着y轴重复下就会发现，还有一个更短的Pt-Ti距离。</p>
<p><img src="/2022/04/04/A28/1.png"></p>
<p>图1： Pt-Ti原子之间的距离</p>
<p>测量下，距离为：3.818 $\AA$。在周期性计算中，如果刚开始模型搭建的时候没有考虑到这一点，或者分子比较大，亦或者AIMD过程中分子到处跑，都会出现类似这样的情形。所以在测量距离时候，要注意周期性边界对数值的影响。当然最理想的情况就是模型搭建的时候将这一情况考虑进来，尽可能将分子放在slab的中间部分。如果出现这种情况，测量的时候加上周期性边界条件的校正即可，这也是本节要介绍的内容。</p>
<p><img src="/2022/04/04/A28/2.png"></p>
<p>图2：考虑周期性边界条件后Pt-Ti之间的距离</p>
<p>首先我们看下体系的坐标，在<code>p4vasp</code>的界面中，<code>POSCAR</code>中每个原子对应着不同的序号（序号是从<code>1</code>开始的），比如：Pt在POSCAR中是第109号原子，前面测量的Pt-Ti距离就是109号和23号原子之间的距离。计算两点之间的距离公式相信大家初高中的时候已经学过了。过程很简单（参考下面脚本中注释掉的部分。）：1）获取两个原子之间的坐标； 2）套公式得到距离。本节介绍通过ASE写个小脚本获取两个原子之间的距离。</p>
<p><img src="/2022/04/04/A28/3.png"></p>
<p>图3：p4vasp中原子的序号</p>
<h4 id="脚本内容"><a href="#脚本内容" class="headerlink" title="脚本内容"></a>脚本内容</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Created on Fri Apr 22 10:06:51 2022</span></span><br><span class="line"><span class="string">@author: qli</span></span><br><span class="line"><span class="string">Command: python3 get_dis_AB.py  atom_A_index atom_B_index</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> ase.io <span class="keyword">import</span> read, write</span><br><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Important Note: Atoms are indexed from 0.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">atom_A, atom_B = [<span class="built_in">int</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> sys.argv[<span class="number">1</span>:<span class="number">3</span>]]</span><br><span class="line">model = read(<span class="string">&#x27;POSCAR&#x27;</span>)</span><br><span class="line">positions = model.get_positions()</span><br><span class="line">dis_AB_1 = model.get_distance(atom_A, atom_B, mic=<span class="literal">True</span>)</span><br><span class="line">dis_AB_2 = model.get_distance(atom_A, atom_B, mic=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(dis_AB_1, <span class="number">4</span>), <span class="string">&#x27;\t&#x27;</span>,<span class="built_in">round</span>(dis_AB_2,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## Not Used </span></span><br><span class="line"><span class="comment">#coord_A = positions[atom_A]</span></span><br><span class="line"><span class="comment">#coord_B = positions[atom_B]</span></span><br><span class="line"><span class="comment">#dis_AB = np.linalg.norm(coord_A-coord_B)</span></span><br><span class="line"><span class="comment">#print(round(dis_AB,4))                     </span></span><br></pre></td></tr></table></figure>

<ol>
<li>atom_A，和 atom_B 是要测量的2个原子，<code>注意：ASE中原子的序号是从0开始的</code>，所以上面的例子中，Ti和Pt在ASE中则是22和108号原子。</li>
<li>脚本里面读的是<code>POSCAR</code>，根据自己的需求改成<code>CONTCAR</code>或者其他的带有坐标的文件。</li>
<li><code>mic=True</code> 考虑周期性边界的影响。<code>mic=False</code> 则是直接测量两个原子的距离。</li>
<li>最后面注释的几行是获取原子坐标，通过<code>numpy</code>计算距离的例子，效果等于前面<code>mic=False</code>.</li>
<li>脚本使用的命令：<code>python3 get_dis_AB.py  22 108 </code></li>
</ol>
<h4 id="脚本效果："><a href="#脚本效果：" class="headerlink" title="脚本效果："></a>脚本效果：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbro:~/Desktop/example$ python3 get_dis_AB.py  22 108</span><br><span class="line">3.8175 	 7.4611</span><br></pre></td></tr></table></figure>

<h4 id="改进下输出格式"><a href="#改进下输出格式" class="headerlink" title="改进下输出格式"></a>改进下输出格式</h4><p>将前面脚本中<code>print</code>的一行删掉，换成下面的即可，反正数值已经在这里了，怎么输出根据自己爱好，把print对应的效果改改即可。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Atom_A\tAtom_B\tdis_A-B&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;%s\t%s\t%.4f&#x27;</span> %(atom_A, atom_B, dis_AB_1))</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbro:~/Desktop/example$ python3 get_dis_AB.py  22 108</span><br><span class="line">Atom_A Atom_B	dis_A-B</span><br><span class="line">22	108	3.8175</span><br></pre></td></tr></table></figure>

<h4 id="放到-bin目录下，随时可以使用："><a href="#放到-bin目录下，随时可以使用：" class="headerlink" title="放到~/bin目录下，随时可以使用："></a>放到<code>~/bin</code>目录下，随时可以使用：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbro:~/Desktop/example$ chmod u+x get_dis_AB.py </span><br><span class="line">qli@bigbro:~/Desktop/example$ mv get_dis_AB.py  ~/bin/</span><br><span class="line">qli@bigbro:~/Desktop/example$ ls</span><br><span class="line">POSCAR</span><br><span class="line">qli@bigbro:~/Desktop/example$ get_dis_AB.py  22 108 </span><br><span class="line">Atom_A	Atom_B	dis_A-B</span><br><span class="line">22	108	3.8175</span><br></pre></td></tr></table></figure>

<p>没有<code>~/bin</code>的话，自己创建一个即可：<code>mkdir ~/bin</code></p>
<p>有兴趣的也可以自己尝试着解决周期性边界条件对计算两原子之间距离的影响，GitHub上也有很多类似的代码。也欢迎大家分享自己的代码或者链接；可以发送到我的邮箱：<code>lqcata@gmail.com</code>或者直接Q:<code>122103465</code>，微信：<code>BigBroSci</code> 联系。</p>
<p><img src="/2022/04/04/A28/qrcode.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2021/12/26/S07/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/26/S07/" class="post-title-link" itemprop="url">Ipad 连接服务器APP</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-26 19:30:16" itemprop="dateCreated datePublished" datetime="2021-12-26T19:30:16-05:00">2021-12-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-28 01:29:18" itemprop="dateModified" datetime="2021-12-28T01:29:18-05:00">2021-12-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Share/" itemprop="url" rel="index"><span itemprop="name">Share</span></a>
        </span>
    </span>

  
    <span id="/2021/12/26/S07/" class="post-meta-item leancloud_visitors" data-flag-title="Ipad 连接服务器APP" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/12/26/S07/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/12/26/S07/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在ipad，手机上运行终端，连接服务器可以让我们随时随地查看，提交任务。在这里推荐一款ipad和iphone上的终端APP: SSHaking。如果你用的安卓系统，一些推荐的APP可以直接到文章底部去找。<br>先依照个人使用的经验，列出来以下SSHaking的优点：</p>
<p>1） 界面简洁，没广告；</p>
<p>2） 可以同时打开好几个terminal界面；</p>
<p>3）连接服务器设置也很简单；</p>
<p>4） 支持连接多个Hosts； （平时常用的terminus只支持一个，连多个的话要花钱，服务器如果只有一个，也推荐terminus）</p>
<p>5） 免费！！！！</p>
<p>6）APP的开发者很牛，可能也很帅！</p>
<p>7）希望大家多多下载这款APP，有什么bug及时给作者提出来，而且作者看到后修复的也很及时。</p>
<p>如果你用的是安卓系统，可以有以下几个选择：</p>
<p>1） juiceSSH (轻和浅吟🐳)<br>2） Admin hands (HeyTamas)</p>
<p>括号里是提供APP名字的好心人。如果你也有推荐的其他好用的APP(免费的)，可以在微信公众号留言。</p>
<p> <img src="/2021/12/26/S07/F00/QR_code.jpeg" alt=""></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/jvghzIlV6NOsNFjUa445xQ">https://mp.weixin.qq.com/s/jvghzIlV6NOsNFjUa445xQ</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2021/01/01/A27/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/01/01/A27/" class="post-title-link" itemprop="url">从Citrine Informatics数据库获取数据</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-01-01 00:30:16" itemprop="dateCreated datePublished" datetime="2021-01-01T00:30:16-05:00">2021-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2021/01/01/A27/" class="post-meta-item leancloud_visitors" data-flag-title="从Citrine Informatics数据库获取数据" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2021/01/01/A27/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/01/01/A27/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Citrine 也是一个材料学数据库，自带了机器学习工具，大家也可以研究琢磨一下。官网是 <a target="_blank" rel="noopener" href="https://citrination.com/search/simple?searchMatchOption=fuzzyMatch。这里，我们将通过几个例子了解如何在这个数据库中获取数据。在Citrine中获取数据需要用到">https://citrination.com/search/simple?searchMatchOption=fuzzyMatch。这里，我们将通过几个例子了解如何在这个数据库中获取数据。在Citrine中获取数据需要用到</a> matminer.data_retrieval.retrieve_Citrine.CitrineDataRetrieval 这个工具，其跟materials project类似，也学要一个API_key。大家可以在官网注册，并记录下API_Key。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#请先在终端中输入： pip install citrination_client ； 否则会报错</span></span><br><span class="line"><span class="comment">#然后我们回到代码，导入 CitrineDataRetrieval 这个模块</span></span><br><span class="line"><span class="keyword">from</span> matminer.data_retrieval.retrieve_Citrine <span class="keyword">import</span> CitrineDataRetrieval</span><br></pre></td></tr></table></figure>
<h4 id="示例1：获取化学式为-Si-的所有材料的实验测得的能带"><a href="#示例1：获取化学式为-Si-的所有材料的实验测得的能带" class="headerlink" title="示例1：获取化学式为 Si 的所有材料的实验测得的能带"></a>示例1：获取化学式为 Si 的所有材料的实验测得的能带</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先实例化这个工具，需要提供你的API_Key</span></span><br><span class="line">cdr = CitrineDataRetrieval(api_key=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 接下来，类似从materials project获取数据，我们需要用get_dataframe函数</span></span><br><span class="line">df = cdr.get_dataframe(criteria=&#123;<span class="string">&#x27;formula&#x27;</span>:<span class="string">&#x27;Si&#x27;</span>, <span class="string">&#x27;data_type&#x27;</span>: <span class="string">&#x27;EXPERIMENTAL&#x27;</span>&#125;, </span><br><span class="line">                       properties=[<span class="string">&#x27;Band gap&#x27;</span>],</span><br><span class="line">                       secondary_fields=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  0%|                                                                                            | 0/7 [00:00&lt;?, ?it/s]d:\programs\anaconda3\envs\py36\lib\site-packages\matminer\data_retrieval\retrieve_Citrine.py:103: FutureWarning:</span><br><span class="line"></span><br><span class="line">pandas.io.json.json_normalize is deprecated, use pandas.json_normalize instead</span><br><span class="line"></span><br><span class="line">100%|████████████████████████████████████████████████████████████████████████████████████| 7/7 [00:00&lt;00:00, 87.33it/s]</span><br><span class="line"></span><br><span class="line">all available fields:</span><br><span class="line">[<span class="string">&#x27;Band gap&#x27;</span>, <span class="string">&#x27;uid&#x27;</span>, <span class="string">&#x27;Band gap-units&#x27;</span>, <span class="string">&#x27;category&#x27;</span>, <span class="string">&#x27;references&#x27;</span>, <span class="string">&#x27;chemicalFormula&#x27;</span>, <span class="string">&#x27;Crystallinity&#x27;</span>, <span class="string">&#x27;Band gap-conditions&#x27;</span>, <span class="string">&#x27;Band gap-methods&#x27;</span>, <span class="string">&#x27;Band gap-dataType&#x27;</span>]</span><br><span class="line"></span><br><span class="line">suggested common fields:</span><br><span class="line">[<span class="string">&#x27;references&#x27;</span>, <span class="string">&#x27;chemicalFormula&#x27;</span>, <span class="string">&#x27;Crystallinity&#x27;</span>, <span class="string">&#x27;Band gap&#x27;</span>, <span class="string">&#x27;Band gap-units&#x27;</span>, <span class="string">&#x27;Band gap-conditions&#x27;</span>, <span class="string">&#x27;Band gap-methods&#x27;</span>, <span class="string">&#x27;Band gap-dataType&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df <span class="comment">#查看表格</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/01/A27/r1.png" alt=""></p>
<p>从上面结果可以看出，数据库里有化学式为Si的材料共7中实验测得的能带数据。这些数据来源的文献，带隙的值，实验方法都被记录了下来。</p>
<h4 id="示例2：获取材料对-OH-和-O物种的吸附能"><a href="#示例2：获取材料对-OH-和-O物种的吸附能" class="headerlink" title="示例2：获取材料对 OH 和 O物种的吸附能"></a>示例2：获取材料对 <em>OH 和 </em>O物种的吸附能</h4><p>想不到citrine数据库还有各种材料对<em>OH 和 </em>O 物种的吸附能，一起来看看怎么获取把。要查询更多的数据库，请探索官网<a target="_blank" rel="noopener" href="https://citrination.com/datasets">https://citrination.com/datasets</a> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们发现这里不需要指定筛选条件，只需要返回所需要的性质即可。</span></span><br><span class="line">df_OH = cdr.get_dataframe(criteria=&#123;&#125;, properties=[<span class="string">&#x27;adsorption energy of OH&#x27;</span>], secondary_fields=<span class="literal">True</span>)</span><br><span class="line">df_O = cdr.get_dataframe(criteria=&#123;&#125;, properties=[<span class="string">&#x27;adsorption energy of O&#x27;</span>], secondary_fields=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<pre><code>  0%|                                                                                            | 0/9 [00:00&lt;?, ?it/s]d:\programs\anaconda3\envs\py36\lib\site-packages\matminer\data_retrieval\retrieve_Citrine.py:103: FutureWarning:

pandas.io.json.json_normalize is deprecated, use pandas.json_normalize instead

100%|███████████████████████████████████████████████████████████████████████████████████| 9/9 [00:00&lt;00:00, 128.63it/s]


all available fields:
[&#39;uid&#39;, &#39;Adsorption energy of OH&#39;, &#39;Adsorption energy of OH-units&#39;, &#39;Morphology&#39;, &#39;Surface facet&#39;, &#39;category&#39;, &#39;references&#39;, &#39;chemicalFormula&#39;, &#39;Adsorption energy of OH-conditions&#39;, &#39;Adsorption energy of OH-dataType&#39;]

suggested common fields:
[&#39;references&#39;, &#39;chemicalFormula&#39;, &#39;Surface facet&#39;, &#39;Adsorption energy of OH&#39;, &#39;Adsorption energy of OH-units&#39;, &#39;Adsorption energy of OH-dataType&#39;, &#39;Morphology&#39;, &#39;Adsorption energy of OH-conditions&#39;]


100%|█████████████████████████████████████████████████████████████████████████████████| 21/21 [00:00&lt;00:00, 140.70it/s]

all available fields:
[&#39;uid&#39;, &#39;Surface facet&#39;, &#39;Adsorption energy of O&#39;, &#39;category&#39;, &#39;references&#39;, &#39;chemicalFormula&#39;, &#39;Reconstruction&#39;, &#39;Adsorption energy of O-units&#39;, &#39;Adsorption energy of O-conditions&#39;]

suggested common fields:
[&#39;references&#39;, &#39;chemicalFormula&#39;, &#39;Surface facet&#39;, &#39;Adsorption energy of O&#39;, &#39;Adsorption energy of O-units&#39;, &#39;Adsorption energy of O-conditions&#39;, &#39;Reconstruction&#39;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_OH.head()</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/01/A27/r2.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_O.head()</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/01/A27/r3.png" alt=""></p>
<p>大家可以看到，这些数据库里面的数据还不够丰富。大家也可以把自己计算得到的数据上传到citrine数据库中，促进科学知识的开放获取。</p>
<ul>
<li>实际上 citrine 数据库包含了很多实验数据，下次的分享中，我们会把citrine数据库中的实验数据和materials project中的计算数据做个对比。</li>
<li>强烈推荐大家在学习的时候使用jupyter notebook。</li>
<li>附上jupyter notebook文件共大家参考：【链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1W1XKj-Fnjmx1yIe2QB7_MQ">https://pan.baidu.com/s/1W1XKj-Fnjmx1yIe2QB7_MQ</a> 提取码：jvoi 】</li>
</ul>
<p>本次分享到此结束。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2020/12/22/A26/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/22/A26/" class="post-title-link" itemprop="url">利用matminer从数据库获取数据</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-22 00:30:16" itemprop="dateCreated datePublished" datetime="2020-12-22T00:30:16-05:00">2020-12-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2020/12/22/A26/" class="post-meta-item leancloud_visitors" data-flag-title="利用matminer从数据库获取数据" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/12/22/A26/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/22/A26/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://nbviewer.jupyter.org/github/hackingmaterials/matminer_examples/blob/master/matminer_examples/data_retrieval-nb/data_retrieval_basics.ipynb">https://nbviewer.jupyter.org/github/hackingmaterials/matminer_examples/blob/master/matminer_examples/data_retrieval-nb/data_retrieval_basics.ipynb</a></p>
<h2 id="从Materials-Project-数据库获取"><a href="#从Materials-Project-数据库获取" class="headerlink" title="从Materials Project 数据库获取"></a>从Materials Project 数据库获取</h2><p>从Materials Project数据库获取数据得用到 matminer.data_retrieval.retrieve_MP.MPDataRetrieval 功能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先导入模块</span></span><br><span class="line"><span class="keyword">from</span> matminer.data_retrieval.retrieve_MP <span class="keyword">import</span> MPDataRetrieval</span><br><span class="line"><span class="comment"># 实例化 MPDataRetrieval 这个类</span></span><br><span class="line">mpdr = MPDataRetrieval(api_key=<span class="string">&#x27;your_own_api_key&#x27;</span>) </span><br><span class="line"><span class="comment"># 在实例化 MPDataRetrieval 时需要输入用户在 Material Project 网站的 API Key.</span></span><br></pre></td></tr></table></figure>
<h2 id="示例1：获取所有单元素材料的密度"><a href="#示例1：获取所有单元素材料的密度" class="headerlink" title="示例1：获取所有单元素材料的密度"></a>示例1：获取所有单元素材料的密度</h2><p>上一次的介绍说到，matminer 处理的数据跟 pandas 库一样，是 dataframe，所以我们要用 get_dataframe 方法获取数据; dataframe 看起来就像excel 表格一样。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df = mpdr.get_dataframe(criteria=&#123;<span class="string">&quot;nelements&quot;</span>: <span class="number">1</span>&#125;, properties=[<span class="string">&#x27;density&#x27;</span>, <span class="string">&#x27;pretty_formula&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;There are &#123;&#125; entries on MP with 1 element&quot;</span>.<span class="built_in">format</span>(df[<span class="string">&#x27;density&#x27;</span>].count())) <span class="comment"># 计算有多少材料</span></span><br><span class="line"><span class="comment">#请自行关注 df[&#x27;density&#x27;].count() 语句</span></span><br></pre></td></tr></table></figure>
<p>criteria 是搜索条件，它是一个字典，字典里面可以有多个键值对; properties 是想要获取的材料性质，它是个列表，里面可以有多个性质。其实criteria 也是材料的性质。想知道所有可用的性质，请参考 <a target="_blank" rel="noopener" href="https://github.com/materialsproject/pymatgen/blob/master/pymatgen/ext/matproj.py">https://github.com/materialsproject/pymatgen/blob/master/pymatgen/ext/matproj.py</a></p>
<p>上述代码意味着 我们想在数据库中搜索材料，这些材料元素种类为1，对于这些材料，我们想得到它们的密度和化学式信息。</p>
<p>结果如下：</p>
<p><img src="/2020/12/22/A26/re1.png" style="zoom:80%;"></p>
<p>让我们看一下这个 dataframe 表格长什么样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.head()  <span class="comment"># 这个语句会显示 df 这个表格的前几行，可以看到，我们获得了 716 个单元素材料。</span></span><br><span class="line">           <span class="comment"># 表格里记录了我们需要的密度 和 化学式的性质，以及它们的ID</span></span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="/2020/12/22/A26/re2.png" style="zoom: 80%;"></p>
<h3 id="示例2：获取所有带隙大于-4-0-eV的材料"><a href="#示例2：获取所有带隙大于-4-0-eV的材料" class="headerlink" title="示例2：获取所有带隙大于 4.0 eV的材料"></a>示例2：获取所有带隙大于 4.0 eV的材料</h3><p>方法挺简单的，就是在上个例子的 get_dataframe 方法中设置新的搜索条件: 带隙大于4.0 eV.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 带隙是 band_gap，大于4怎么写呢？ 是 greater than, 缩写成 gt. 在 matminer中要写成 $gt </span></span><br><span class="line"><span class="comment"># 大家注意体会 criteria 的字典形式。criteria=, properties= 可以省略不写。</span></span><br><span class="line">df = mpdr.get_dataframe(&#123;<span class="string">&quot;band_gap&quot;</span>: &#123;<span class="string">&quot;$gt&quot;</span>: <span class="number">4.0</span>&#125;&#125;, [<span class="string">&#x27;pretty_formula&#x27;</span>, <span class="string">&#x27;band_gap&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;There are &#123;&#125; entries on MP with a band gap larger than 4.0&quot;</span>.<span class="built_in">format</span>(df[<span class="string">&#x27;band_gap&#x27;</span>].count()))</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="/2020/12/22/A26/re3.png" style="zoom:80%;"></p>
<p>再看一下表格长什么样子</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="/2020/12/22/A26/re4.png" style="zoom:80%;"></p>
<p>如果想把表格保存成excel可读写的格式，可以用下面的语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_csv(<span class="string">&#x27;materials_bg_gt_4.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="示例3：获取-VRH-剪切模量和体积模量¶"><a href="#示例3：获取-VRH-剪切模量和体积模量¶" class="headerlink" title="示例3：获取 VRH 剪切模量和体积模量¶"></a>示例3：获取 VRH 剪切模量和体积模量<a target="_blank" rel="noopener" href="http://localhost:8888/notebooks/get_data_from_pymatgen.ipynb#示例3：获取-VRH-剪切模量和体积模量">¶</a></h3><p>首先得要求这些材料存在弹性的性质，其次，我们还想要求这些弹性数据没有警告信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 存在弹性常数信息用 &quot;elasticity&quot;: &#123;&quot;$exists&quot;: True&#125; 表示，没有警告信息用 一个空列表表示：&quot;elasticity.warnings&quot;: []</span></span><br><span class="line"></span><br><span class="line">df = mpdr.get_dataframe(&#123;<span class="string">&quot;elasticity&quot;</span>: &#123;<span class="string">&quot;$exists&quot;</span>: <span class="literal">True</span>&#125;, <span class="string">&quot;elasticity.warnings&quot;</span>: []&#125;,</span><br><span class="line">                        [<span class="string">&#x27;pretty_formula&#x27;</span>, <span class="string">&#x27;elasticity.K_VRH&#x27;</span>, <span class="string">&#x27;elasticity.G_VRH&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;There are &#123;&#125; elastic entries on MP with no warnings&quot;</span>.<span class="built_in">format</span>(df[<span class="string">&#x27;elasticity.K_VRH&#x27;</span>].count()))</span><br></pre></td></tr></table></figure>
<p>搜索结果如下：</p>
<p><img src="/2020/12/22/A26/r5.png" style="zoom:80%;"></p>
<p>我们想统计一下这些数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.describe() <span class="comment"># 该语句可以很方便地对表格中的每一列数据进行统计，给出数量，平均数，方差，最小、最大值等信息</span></span><br></pre></td></tr></table></figure>
<p>得到：</p>
<p><img src="/2020/12/22/A26/r6.png" style="zoom:80%;"></p>
<p><strong>接下来看一个更复杂的例子</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">除了上次的搜索条件外，我们想搜索包含 Pb 和 Te 的材料：&quot;elements&quot;: &#123;&quot;$all&quot;: [&quot;Pb&quot;, &quot;Te&quot;]&#125; </span></span><br><span class="line"><span class="string">材料的稳定性也在考虑之中，energy above hull 必须在1e-6以下：&quot;e_above_hull&quot;: &#123;&quot;$lt&quot;: 1e-6&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">df = mpdr.get_dataframe(criteria=&#123;<span class="string">&quot;elasticity&quot;</span>: &#123;<span class="string">&quot;$exists&quot;</span>: <span class="literal">True</span>&#125;, </span><br><span class="line">                         <span class="string">&quot;elasticity.warnings&quot;</span>: [],</span><br><span class="line">                         <span class="string">&quot;elements&quot;</span>: &#123;<span class="string">&quot;$all&quot;</span>: [<span class="string">&quot;Pb&quot;</span>, <span class="string">&quot;Te&quot;</span>]&#125;,</span><br><span class="line">                         <span class="string">&quot;e_above_hull&quot;</span>: &#123;<span class="string">&quot;$lt&quot;</span>: <span class="number">1e-6</span>&#125;&#125;, <span class="comment"># to limit the number of hits for the sake of time</span></span><br><span class="line">                        properties = [<span class="string">&quot;elasticity.K_VRH&quot;</span>, <span class="string">&quot;elasticity.G_VRH&quot;</span>, <span class="string">&quot;pretty_formula&quot;</span>, </span><br><span class="line">                                      <span class="string">&quot;e_above_hull&quot;</span>, <span class="string">&quot;bandstructure&quot;</span>, <span class="string">&quot;dos&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;There are &#123;&#125; elastic entries on MP with no warnings that contain &quot;</span></span><br><span class="line">      <span class="string">&quot;Pb and Te with energy above hull ~ 0.0 eV&quot;</span>.<span class="built_in">format</span>(df[<span class="string">&#x27;elasticity.K_VRH&#x27;</span>].count()))</span><br></pre></td></tr></table></figure>
<p>结果是：</p>
<p>There are 3 elastic entries on MP with no warnings that contain Pb and Te with energy above hull ~ 0.0 eV</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/12/22/A26/r7.png" alt=""></p>
<p>下面来查看一下其中一个材料的能带和DOS图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymatgen.electronic_structure.plotter <span class="keyword">import</span> BSDOSPlotter <span class="comment"># 调用 Pymatgen 作图</span></span><br><span class="line"></span><br><span class="line">mpid = <span class="string">&#x27;mp-20740&#x27;</span></span><br><span class="line">idx = df.index[df.index==mpid][<span class="number">0</span>]  <span class="comment"># 获取 mp-20740 这个材料所在的行数</span></span><br><span class="line">plt = BSDOSPlotter().get_plot(bs=df.loc[idx, <span class="string">&#x27;bandstructure&#x27;</span>], dos=df.loc[idx, <span class="string">&#x27;dos&#x27;</span>]);</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/12/22/A26/r8.png" style="zoom:80%;"></p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><ul>
<li><p>matminer获得的数据(本教程保存在 df 变量中)可以可视化，也可以直接用来做机器学习。有兴趣的同学请自学 pandas 这个 python 库，学习 dataframe 数据的处理方法。</p>
</li>
<li><p>Pymatgen 做的能带和DOS图不够美观。大家可以留言，我有机会可以跟大家分享修改pymatgen代码来美化这些图。</p>
</li>
<li><p>官网的教程是基于 jupyter notebook的。jupyter notebook 的好处是既能运行代码，又能自由地给代码加注释，公式，图片。所得到的文档便于阅读和理解。希望大家也能学会这个python 库。</p>
</li>
<li><p>如果想调用 jupyter notebook来运行上述代码，建议大家在具有图形界面的终端上试验。以windows 系统为例，再按照上篇教程创建好 py36 虚拟环境后，需要</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jupyter <span class="comment"># 具体的使用方法请参考其它网络教程</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>本文还附带jupyter notebook 版本的文档供大家阅读和使用 【链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/153PcfiM3vaAG71MCCTFuCQ">https://pan.baidu.com/s/153PcfiM3vaAG71MCCTFuCQ</a><br>提取码：w4us 】</p>
</li>
</ul>
<p>本次的教程到这就结束了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2020/12/16/A25/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/16/A25/" class="post-title-link" itemprop="url">超好用的材料类机器学习开源软件-Matminer</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-16 00:30:16" itemprop="dateCreated datePublished" datetime="2020-12-16T00:30:16-05:00">2020-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2020/12/16/A25/" class="post-meta-item leancloud_visitors" data-flag-title="超好用的材料类机器学习开源软件-Matminer" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/12/16/A25/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/16/A25/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天向大家隆重介绍一款材料类的机器学习开源软件：Matminer！机器学习预测材料性质，乃至逆向设计材料是材料领域的热门研究话题。很多同学有心做机器学习方面的研究，奈何不知道有哪些实用的代码，从而使项目一拖再拖。材料类的机器学习软件有很多，我比较喜欢Matminer这一款，因为它是由Pymatgen开发者开发的，非常易于使用。现在就向大家介绍一下这款软件（本教程根据Matminer官网<a target="_blank" rel="noopener" href="https://hackingmaterials.lbl.gov/matminer/#installing-matminer撰写）">https://hackingmaterials.lbl.gov/matminer/#installing-matminer撰写）</a></p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Matminer是用于材料数据挖掘的基于Python的开源软件。它可以从各种数据库获取材料属性数据，将复杂材料属性(如成分、晶体结构、能带结构)表征为与物理相关的特征量，训练机器学习模型，并分析数据挖掘的结果。</p>
<p>Matminer使用pandas数据格式。它还有一个进阶的自动化版本叫Automatminer，可以自动化的训练机器学习模型并得到结果。</p>
<p>Matminer 可以生产可交互的图像。下面的流程图生动展示了matminer的工作内容。Matminer 可以访问Citrine，Materials Project，MDF等数据库，获得材料结构、能带、力学性能等多种性质。这些性质可以被转换成数值化的、可视化的特征量，该特征量可以被用于训练机器学习模型。</p>
<p><img src="/2020/12/16/A25/A25.png" alt=""></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>Matminer的安装过程非常简单，大家只要安装好Anaconda3 (Python 3.6) 后，在终端输入 pip install matminer 就行了。建议大家一并安装Pymatgen。</p>
<p>下面以天河超算为例，展示matminer的安装过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建基于python 3.6 的虚拟环境，名字叫 py36</span></span><br><span class="line">(base) [test@ln0%tianhe2 ~]$ conda create -n py36 python=<span class="number">3.6</span></span><br></pre></td></tr></table></figure>
<p>安装好环境后，激活该环境，并安装pymatgen 和 matminer</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 激活环境用conda activate 命令</span></span><br><span class="line">(base) [test@ln0%tianhe2 ~]$ conda activate py36</span><br><span class="line"></span><br><span class="line"><span class="comment"># 括号里的 base 就会变成 py36</span></span><br><span class="line">(py36) [test@ln0%tianhe2 ~]$ conda install -c conda-forge pymatgen</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面这个命令为安装 matminer</span></span><br><span class="line">(py36) [test@ln0%tianhe2 ~]$ pip install matminer</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>下面测试安装结果，输入下列命令，如果不出错，就是安装成功了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(py36) [test@ln0%tianhe2 ~]$ python</span><br><span class="line">Python <span class="number">3.6</span><span class="number">.12</span> |Anaconda, Inc.| (default, Sep  <span class="number">8</span> <span class="number">2020</span>, <span class="number">23</span>:<span class="number">10</span>:<span class="number">56</span>) </span><br><span class="line">[GCC <span class="number">7.3</span><span class="number">.0</span>] on linux</span><br><span class="line"><span class="type">Type</span> <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> <span class="keyword">or</span> <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pymatgen</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> matminer</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br></pre></td></tr></table></figure>
<p>现在可以尽情地去测试啦！后续教程将陆续分享。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2020/10/02/A24/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/10/02/A24/" class="post-title-link" itemprop="url">离子迁移概率密度可视化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-10-02 00:30:16" itemprop="dateCreated datePublished" datetime="2020-10-02T00:30:16-04:00">2020-10-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2020/10/02/A24/" class="post-meta-item leancloud_visitors" data-flag-title="离子迁移概率密度可视化" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/10/02/A24/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/10/02/A24/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>大师兄在9月8日的文章中讲了如何用 Pymatgen 计算离子的电导率（该方法可以用来研究固态电解质等问题），<strong>本次，大师兄介绍一下如何使用 Pymatgen 可视化离子的迁移概率密度。</strong></p>
<p>先举个例子，</p>
<blockquote>
<p>在“Design principles for solid-state lithium superionic conductors”一文中（Wang et al., Nature Materials <strong>2015</strong>, <em>14</em> , 1026–1031. ），作者用Ab Initio Molecular Dynamic （AIMD）计算了Li 离子在Li$\mathrm{_1}<script type="math/tex">\mathrm{_0}$GeP$\mathrm{_2}$S$\mathrm{_1}</script>\mathrm{_2}$， Li$\mathrm{_7}$P$\mathrm{_3}$S$\mathrm{_1}$$\mathrm{_1}$，Li$\mathrm{_2}$S，和 Li$\mathrm{_4}$GeS$\mathrm{_4}$ 四种材料中的迁移概率密度（Probability Density），结果如下图所示：</p>
</blockquote>
<p><img src="/2020/10/02/A24/A24_1.png" alt=""></p>
<blockquote>
<ul>
<li>从图中可以看出Li离子在图a所示材料中主要沿c轴方向的通道迁移，而且由于这个通道连通得比较好，Li离子的迁移势垒会比较低（0.22~0.25 eV）。</li>
<li>Li离子在图b所示的材料的迁移路径形成了一个三维网格，而且由于这个概率密度比图b中的概率密度分布得更加均匀，Li离子的迁移势垒更低（0.18~0.19 eV）。</li>
<li>图b所示的材料就完全不行了，因为Li离子的概率密度仅分布在特定的位点附近，说明离子不能有效地移动。</li>
<li>Li离子在图d所示材料中也存在迁移局域化的行为。</li>
<li>作者总结说 “A general principle for the design of Li-ion conductors with low activation energy can be distilled from the above findings: all of the sites within the diffusion network should be energetically close to equivalent, with large channels connecting them.”</li>
</ul>
</blockquote>
<p><strong>那么我们如何在自己的计算中画出这样的图呢？</strong>Pymatgen 举手说，它可以帮忙！</p>
<p>但是在开始之前，我们要安装Pymatgen的插件：<strong>Pymatgen-diffusion</strong>（<a target="_blank" rel="noopener" href="https://github.com/materialsvirtuallab/pymatgen-diffusion）。">https://github.com/materialsvirtuallab/pymatgen-diffusion）。</a></p>
<h2 id="安装-Pymatgen-diffusion"><a href="#安装-Pymatgen-diffusion" class="headerlink" title="安装 Pymatgen-diffusion"></a>安装 Pymatgen-diffusion</h2><p><strong>推荐大家使用最新版的Anaconda安装Pymatgen及其插件。</strong>点击上面的链接，进入官网后，点击最新版本链接，</p>
<p><img src="/2020/10/02/A24/A24_2.png" alt=""></p>
<p>我们可以下载.zip文件，</p>
<p><img src="/2020/10/02/A24/A24_3.png" alt=""></p>
<p>下载完成后，大家可以解压这个文件，得到 pymatgen-diffusion-2019.8.18文件夹。</p>
<p>我们把其中的 pymatgen_diffusion 文件夹放到 Anaconda的site-packages文件夹下，路径是 Windows 系统：……\Anaconda\Lib\site-packages；Linux系统：……/anaconda3/lib/pythonx.x/site-packages，就算安装好了。</p>
<p>接下来我们可以启动python，导入这个模块，如果不报错就没有问题了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[test@ln0%tianhe2 li_sn_s]$ python</span><br><span class="line">Python 3.8.3 (default, Jul  2 2020, 16:21:59) </span><br><span class="line">[GCC 7.3.0] :: Anaconda, Inc. on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import pymatgen_diffusion</span><br><span class="line">&gt;&gt;&gt; </span><br></pre></td></tr></table></figure>
<h2 id="学习用法"><a href="#学习用法" class="headerlink" title="学习用法"></a>学习用法</h2><p>我们可以在其github网站上通过例子学习这个模块的用法。</p>
<p><img src="/2020/10/02/A24/A24_4.png" alt=""></p>
<p>点击打开 probbility_analysis.ipynb 文件。</p>
<p><img src="/2020/10/02/A24/A24_5.png" alt=""></p>
<p>其内容如下（有所删减）：如果不想看的话可直接查看 <strong>开始作图</strong> 部分</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymatgen.analysis.diffusion_analyzer <span class="keyword">import</span> DiffusionAnalyzer</span><br><span class="line"><span class="keyword">from</span> pymatgen_diffusion.aimd.pathway <span class="keyword">import</span> ProbabilityDensityAnalysis</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment">#ProbabilityDensityAnalysis object</span></span><br><span class="line">filename=<span class="string">&quot;/Users/iekhengchu/repos/pymatgen-diffusion/pymatgen_diffusion/aimd/tests/cNa3PS4_pda.json&quot;</span></span><br><span class="line"></span><br><span class="line">data = json.load(<span class="built_in">open</span>(<span class="string">&quot;../pymatgen_diffusion/aimd/tests/cNa3PS4_pda.json&quot;</span>, <span class="string">&quot;r&quot;</span>))</span><br><span class="line">diff_analyzer = DiffusionAnalyzer.from_dict(data) <span class="comment"># 初始化DiffusionAnalyzer类</span></span><br><span class="line"></span><br><span class="line">pda = ProbabilityDensityAnalysis.from_diffusion_analyzer(diff_analyzer, interval=<span class="number">0.5</span>, </span><br><span class="line">                                                         species=(<span class="string">&quot;Na&quot;</span>, <span class="string">&quot;Li&quot;</span>)) <span class="comment">#可以指定离子</span></span><br><span class="line"><span class="comment">#Save probability distribution to a CHGCAR-like file</span></span><br><span class="line">pda.to_chgcar(filename=<span class="string">&quot;CHGCAR_new2.vasp&quot;</span>) <span class="comment">#保存概率密度文件</span></span><br></pre></td></tr></table></figure>
<h2 id="开始作图"><a href="#开始作图" class="headerlink" title="开始作图"></a>开始作图</h2><p>代码（test.py）如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymatgen_diffusion.aimd.pathway <span class="keyword">import</span> ProbabilityDensityAnalysis</span><br><span class="line"><span class="keyword">from</span> pymatgen.core.trajectory <span class="keyword">import</span> Trajectory</span><br><span class="line"><span class="keyword">from</span> pymatgen.io.vasp.outputs <span class="keyword">import</span> Xdatcar</span><br><span class="line"><span class="keyword">from</span> pymatgen.analysis.diffusion_analyzer <span class="keyword">import</span> DiffusionAnalyzer</span><br><span class="line"></span><br><span class="line">traj = Trajectory.from_file(<span class="string">&#x27;XDATCAR&#x27;</span>)</span><br><span class="line">diff = DiffusionAnalyzer.from_structures(traj,<span class="string">&#x27;Li&#x27;</span>,<span class="number">900</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">pda = ProbabilityDensityAnalysis.from_diffusion_analyzer(diff,interval=<span class="number">0.5</span>,species=(<span class="string">&quot;Li&quot;</span>))</span><br><span class="line">pda.to_chgcar(filename=<span class="string">&quot;pda.vasp&quot;</span>) <span class="comment">#保存概率密度文件</span></span><br></pre></td></tr></table></figure>
<p>此处理过程大概耗时8分钟，因机器而异。</p>
<p>在VESTA中可视化如下：</p>
<p><img src="/2020/10/02/A24/A24_6.png" alt=""></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2020/09/24/A23/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/24/A23/" class="post-title-link" itemprop="url">Ubuntu常用软件的安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-09-24 00:30:16" itemprop="dateCreated datePublished" datetime="2020-09-24T00:30:16-04:00">2020-09-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2020/09/24/A23/" class="post-meta-item leancloud_visitors" data-flag-title="Ubuntu常用软件的安装" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/24/A23/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/24/A23/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>前面一节我们介绍了Ubuntu虚拟机的安装，今天就介绍一些Ubuntu常用软件的软装。大部分极其简单，敲个命令，输入下密码就能解决。少部分非常简单，设置下环境变量就可以解决。有些安装比较蛋疼的可以借助第三方平台比如Anaconda等来安装，也可以归纳到非常简单的行列中。所以，So easy！！！</p>
<h5 id="1-第一件事："><a href="#1-第一件事：" class="headerlink" title="1  第一件事："></a>1  第一件事：</h5><p>打开终端（<code>CONTROL</code> + <code>ALT</code> + <code>T</code>），创建<code>~/bin</code> 文件夹。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbrosci:~$ mkdir ~/bin</span><br></pre></td></tr></table></figure>
<p>这个文件夹用于存储一些日常的脚本文件，可执行的小程序。 平时勤备份也不会占用太大空间。</p>
<h5 id="2-命令安装程序"><a href="#2-命令安装程序" class="headerlink" title="2 命令安装程序"></a>2 命令安装程序</h5><p>复制下面的<code>sudo apt-get</code>命令，输入到<code>Terminal</code>中，回车，输入密码即可。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install python3-pip</span><br><span class="line">sudo apt-get install curl</span><br><span class="line">curl https://bootstrap.pypa.io/get-pip.py --output get-pip.py</span><br><span class="line">sudo python get-pip.py</span><br><span class="line"></span><br><span class="line">sudo apt-get install vim </span><br><span class="line">sudo apt-get install vim-gtk</span><br><span class="line">sudo apt-get install sshfs</span><br><span class="line">sudo apt-get install rename </span><br><span class="line">sudo apt-get install xclip </span><br><span class="line">sudo apt-get install git </span><br><span class="line">sudo apt-get install gnuplot</span><br><span class="line">sudo apt-get install xcrysden</span><br><span class="line">sudo apt-get tree</span><br><span class="line">sudo apt-get install inkscape  </span><br><span class="line"></span><br><span class="line">sudo apt-get install fish </span><br><span class="line">sudo apt-get install tmux </span><br><span class="line">sudo apt-get install texlive-full</span><br><span class="line">sudo apt-get install kile  </span><br></pre></td></tr></table></figure>
<p>pip 用来安装python程序；</p>
<p>vim就不介绍了；</p>
<p>sshfs 用来把服务器挂载到本地电脑，方便传输数据；</p>
<p>rename 可以很方便批量命名；</p>
<p>xclip 可以把命令的输出复制到剪切板里面，方便鼠标粘贴；</p>
<p>git 用来从git-hub下载，上传，管理一些脚本程序等， </p>
<p>gnuplot 画图用的</p>
<p>xcrysden 可视化软件</p>
<p>tree 方便显示文件目录</p>
<p>inkscape 一款非常好用的做图软件</p>
<p>fish，tmux 装逼效果明显，没对象的重点关注下，好好学习一番，当然功能没的说，很强大。</p>
<p>Latex 写文章的可以使用最后两个命令安装。</p>
<p>其他的暂时也想不起来，如果你有推荐的，可以发邮件给我，后面再添上去。（lqcata@gmail.com）</p>
<h5 id="3-安装Anaconda"><a href="#3-安装Anaconda" class="headerlink" title="3  安装Anaconda"></a>3  安装Anaconda</h5><p>它可以帮助你节省很多时间和精力去安装软件。下载后，按照下面命令，然后一路狂摁回车或者输入<code>yes</code>即可，官网也有安装教程，这里就不累赘了。通过Anaconda安装其他软件，可以参考前面的教程：<a href="https://www.bigbrosci.com/2020/09/19/A20/">https://www.bigbrosci.com/2020/09/19/A20/</a> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbrosci:~/Downloads$ ls</span><br><span class="line">Anaconda3-2020.07-Linux-x86_64.sh  p4vasp-0.3.30.tgz </span><br><span class="line">qli@bigbrosci:~/Downloads$ bash Anaconda3-2020.07-Linux-x86_64.sh </span><br><span class="line">Welcome to Anaconda3 2020.07</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">continue</span> the installation process, please review the license</span><br><span class="line">agreement.</span><br><span class="line">Please, press ENTER to <span class="built_in">continue</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; </span><br></pre></td></tr></table></figure>
<p>Anaconda安装的软件可以通过<a target="_blank" rel="noopener" href="https://anaconda.org">https://anaconda.org</a> 来查询，都会列出来安装的命令，比如RDkit：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c rdkit rdkit</span><br></pre></td></tr></table></figure>
<p>另一个需要注意的是，Anaconda安装后，最喜爱的<code>p4vasp</code>不能正常使用了。解决办法如下：</p>
<p>1） 找到p4v的目录，一般在<code>/usr/bin/</code></p>
<p>2）将<code>p4v</code>中的<code>python</code> 全部改为<code>python2</code></p>
<p>3)  将<code>p4v.py</code> 第一行中的<code>python</code>改为<code>python2</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(base) qli@bigbrosci:~$ p4v </span><br><span class="line">  File <span class="string">&quot;/usr/bin/p4v.py&quot;</span>, line 9</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;&quot;</span><span class="string">&quot;You need to get version 2.0 (or later) of PyGTK for this to work. You</span></span><br><span class="line"><span class="string">             can get source code from http://www.pygtk.org &quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line">          ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line">(base) qli@bigbrosci:~$ <span class="built_in">which</span> p4v </span><br><span class="line">/usr/bin/p4v</span><br><span class="line">(base) qli@bigbrosci:~$ sudo vi /usr/bin/p4v</span><br><span class="line">[sudo] password <span class="keyword">for</span> qli: </span><br><span class="line">(base) qli@bigbrosci:~$ sudo vi /usr/bin/p4v.py </span><br><span class="line">(base) qli@bigbrosci:~$ grep python  /usr/bin/p4v</span><br><span class="line"><span class="built_in">export</span> PYTHONPATH=<span class="variable">$PYTHONPATH</span>:/usr/lib/python2.7/dist-packages</span><br><span class="line"><span class="built_in">exec</span> python2 /usr/bin/p4v.py <span class="string">&quot;<span class="variable">$@</span>&quot;</span></span><br><span class="line">(base) qli@bigbrosci:~$ grep python  /usr/bin/p4v.py </span><br><span class="line"><span class="comment">#!/usr/bin/env python2</span></span><br></pre></td></tr></table></figure>
<h5 id="4-其他可执行的程序"><a href="#4-其他可执行的程序" class="headerlink" title="4 其他可执行的程序"></a>4 其他可执行的程序</h5><p>这里我们以VESTA为例，这种方法非常简单实用。</p>
<p>4.1） 下载解压VESTA程序包。（<a target="_blank" rel="noopener" href="https://jp-minerals.org/vesta/en/）">https://jp-minerals.org/vesta/en/）</a> 直接通过官网下载即可，没必要去群里面求助，也没必要往群里面上传。</p>
<p>4.2） 本人习惯性地将其解压到<code>/home/qli/Documents/VESTA-gtk3</code></p>
<p>4.3)   设置环境变量，将下面的<code>export</code> 两行复制到<code>~/.bashrc</code> 文件中， <code>source</code> 下 <code>.bashrc</code> 文件，然后直接敲命令<code>VESTA</code>即可打开可视化界面。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbrosci:~/Documents/VESTA-gtk3$ ls</span><br><span class="line">asfdc           Library_License  RIETAN.sh          style         VESTA-core</span><br><span class="line">bvparm2016.cif  libVESTA.so      spgra.dat          style.ini     VESTA_def.ini</span><br><span class="line">elements        LICENSE          spgro.dat          template.ins  VESTA-gui</span><br><span class="line">elements.ini    mspgr.dat        STRUCTURE_TIDY     tmp           VESTA.ini</span><br><span class="line">img             PowderPlot       STRUCTURE_TIDY.sh  VESTA         wyckoff.dat</span><br><span class="line">qli@bigbrosci:~/Documents/VESTA-gtk3$ <span class="built_in">pwd</span></span><br><span class="line">/home/qli/Documents/VESTA-gtk3</span><br><span class="line">qli@bigbrosci:~/Documents/VESTA-gtk3$ <span class="built_in">cd</span> </span><br><span class="line">qli@bigbrosci:~$ vi .bashrc</span><br><span class="line"><span class="built_in">export</span> VESTA=<span class="string">&#x27;/home/qli/Documents/VESTA-gtk3&#x27;</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$VESTA</span></span><br><span class="line">qli@bigbrosci:~$ <span class="built_in">source</span> .bashrc	 </span><br><span class="line">qli@bigbrosci:~$ VESTA</span><br></pre></td></tr></table></figure>
<p><code>注意</code> 上面VESTA的路径记得换成你自己电脑里面的。</p>
<h5 id="5-Ubuntu的备份"><a href="#5-Ubuntu的备份" class="headerlink" title="5 Ubuntu的备份"></a>5 Ubuntu的备份</h5><p>本人喜欢瞎折腾，也经常会把电脑搞崩溃，备份就显得尤其重要。对于Ubuntu来说，前面我们在虚拟机的安装中提到存储Ubuntu系统的<code>vdi</code>文件，如果你有足够大的硬盘，可以定期将一个稳定版本的vdi保存起来，万一系统崩溃，删掉坏的，导入最新的备份即可。</p>
<p>如果没有用虚拟机，直接装的Ubuntu系统，或者双系统，可以尝试定期保存<code>~/bin</code> 和<code>~/.bashrc</code> 文件，本人之前就是这样做的（现在懒得折腾，系统不坏了），它们不怎么占空间，打包压缩下，邮件基本就可以上传。如果系统坏掉了，非得安装一个新的才能解决的时候，只需要重复本教程，下载一些常用的软件，以及用备份的<code>~/bin</code> 和<code>~/.bashrc</code> 文件还原一下设置即可。数据一般来说都直接存储在服务器中，相关备份不在本教程讨论范围之内。</p>
<p>当然还有其他的办法备份和恢复虚拟机，比如创建当前Ubuntu版本的iso文件，定期备份当前整个系统以便引导修复等等，精力有限，不再累赘。有兴趣的可以尝试。</p>
<h5 id="6-打赏"><a href="#6-打赏" class="headerlink" title="6 打赏"></a>6 打赏</h5><p>如果感觉本文对你的相关研究有帮助，欢迎打赏，支持作者的热心付出。如果你也有自己擅长的操作等，热烈欢迎无私分享，可以通过QQ（122103465）或者邮件（lqcata@gmail.com）联系。</p>
<p><img src="/2020/09/24/A23/打赏码.jpg" alt="打赏码" style="zoom: 33%;"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2020/09/23/A22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/23/A22/" class="post-title-link" itemprop="url">Ubuntu虚拟机的安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-09-23 00:30:16" itemprop="dateCreated datePublished" datetime="2020-09-23T00:30:16-04:00">2020-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2020/09/23/A22/" class="post-meta-item leancloud_visitors" data-flag-title="Ubuntu虚拟机的安装" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/23/A22/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/23/A22/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>为方便新手入坑，这里我们先介绍一下Ubuntu虚拟机的安装细节。VMWARE和VirtualBox是两个主要的选择，前者收费，后者免费。当然介绍免费的喽。 本节主要把安装的过程展示一遍，然后把需要注意的细节强调一下。安装虚拟机要量力而行，优先在台式机上安装虚拟机。如果你的电脑配置很普通的话，运行起来可能不会很流畅。</p>
<h5 id="第一步：-准备工作"><a href="#第一步：-准备工作" class="headerlink" title="第一步： 准备工作"></a>第一步： 准备工作</h5><p>1 下载Ubuntu的安装包</p>
<p><a target="_blank" rel="noopener" href="https://ubuntu.com/download/desktop">https://ubuntu.com/download/desktop</a></p>
<p>2 下载Virtual Box，并安装</p>
<p><a target="_blank" rel="noopener" href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></p>
<p>3 下载Virtual Box的扩展包并安装（Extension Pack）</p>
<p><img src="/2020/09/23/A22/VM_D.png" alt=""></p>
<h5 id="第二步：安装虚拟机-初始化"><a href="#第二步：安装虚拟机-初始化" class="headerlink" title="第二步：安装虚拟机(初始化)"></a>第二步：安装虚拟机(初始化)</h5><p>2.1） 创建新的虚拟机</p>
<p><img src="/2020/09/23/A22/1.png" alt=" 9.38.59" style="zoom:50%;"></p>
<p>2.2）设置虚拟机的名字，名字里面只要你输入<code>Ubuntu</code>字样，后面的Type和Version会自动更新，<code>Machine Folder</code> 最好选择一个硬盘比较大的盘。 </p>
<p><img src="/2020/09/23/A22/2.png" alt="2" style="zoom:50%;"></p>
<p>2.3） 设置虚拟机的内存，本人喜欢设置为host的一半。</p>
<p><img src="/2020/09/23/A22/2_1.png" alt="2_1" style="zoom:50%;"></p>
<p>2.4）创建虚拟机，按照图片选择即可。</p>
<p><img src="/2020/09/23/A22/2_2.png" alt="2_2" style="zoom:50%;"></p>
<p><img src="/2020/09/23/A22/3.png" alt="3" style="zoom:50%;"></p>
<p><img src="/2020/09/23/A22/4.png" alt="4" style="zoom:50%;"></p>
<p>2.5） 设置虚拟机的<code>vdi</code>文件的目录，如果前面选择好了，这个采用默认即可。虚拟机的大小：如果使用Ubuntu比较频繁，安装的软件、数据处理等比较多的话，根据自己的情况酌情增加下。但是尽量别太小，到时候存储不够容易导致死机崩溃。</p>
<p>另外一个需要注意的是：Ubuntu的系统以及后面你安装的软件，下载的东西，写的脚本等都会存在这个vdi文件里面，如果你换了一台电脑，还想继续使用虚拟机，大可不用再重复本教程的操作，直接导入vdi即可（前面2.4步骤的第一个图片）。</p>
<p><img src="/2020/09/23/A22/5.png" alt="5" style="zoom:50%;"></p>
<p>2.6） 经过前面步骤，虚拟机初始化基本完成了（界面上可以看到），按照箭头，点<code>Settings</code>。</p>
<p><img src="/2020/09/23/A22/6.png" style="zoom:50%;"></p>
<p>2.7) <code>System</code>设置处理器的数目，同样也是host的一半。太小Ubuntu容易卡死，太大host容易卡死。</p>
<p><img src="/2020/09/23/A22/7.png" alt="7" style="zoom:50%;"></p>
<p>2.8）指定Ubuntu安装iso文件的目录，点<code>Storage</code> —&gt; <code>光盘 Empty</code> —&gt; <code>右侧光盘图标</code> </p>
<p><img src="/2020/09/23/A22/9.png" alt="9" style="zoom:50%;"></p>
<p>2.9） 在弹出的对话框，选择前面下载好的Ubuntu安装文件。</p>
<p><img src="/2020/09/23/A22/10.png" alt="8" style="zoom:50%;"></p>
<p><img src="/2020/09/23/A22/11.png" alt="11" style="zoom: 50%;"></p>
<p><img src="/2020/09/23/A22/12.png" alt="12" style="zoom:50%;"></p>
<h5 id="3-安装虚拟机-（Ubuntu的安装）"><a href="#3-安装虚拟机-（Ubuntu的安装）" class="headerlink" title="3 安装虚拟机 （Ubuntu的安装）"></a>3 安装虚拟机 （Ubuntu的安装）</h5><p>3.1） 点击下方图片的<code>Start</code>绿色图表，开始启动安装</p>
<p><img src="/2020/09/23/A22/13.png" alt="11" style="zoom:50%;"></p>
<p>3.2） 选择Install Ubuntu，后面的一路<code>Continue</code></p>
<p><img src="/2020/09/23/A22/14.png" alt="14" style="zoom:50%;"></p>
<p>3.3） 设置键盘类型</p>
<p><img src="/2020/09/23/A22/15.png" alt="15" style="zoom:50%;"></p>
<p>3.4）按照下面的选择，<code>Continue</code></p>
<p><img src="/2020/09/23/A22/16.png" alt="16" style="zoom:50%;"></p>
<p><img src="/2020/09/23/A22/17.png" alt="17" style="zoom:50%;"></p>
<p>3.5) 设置用户名，计算机名，以及密码。</p>
<p><img src="/2020/09/23/A22/18.png" alt="18" style="zoom: 67%;"></p>
<p>3.6） Ubuntu 终于开始安装了，电脑配置好的别走开，配置不好的一边凉快等着去。（PS：配置不好不建议虚拟机，卡的你怀疑人生）</p>
<p><img src="/2020/09/23/A22/19.png" alt="19" style="zoom:50%;"></p>
<p>3.7） 安装完成后，会提示让你先移除安装的ISO文件，然后再点<code>ENTER</code></p>
<p><img src="/2020/09/23/A22/20.png" style="zoom:50%;"></p>
<p>3.8） 这里本人把安装包改了下名字，然后点<code>ENTER</code>。</p>
<p><img src="/2020/09/23/A22/21.png" alt=" 10.04.45" style="zoom:50%;"></p>
<p>3.9) Ubuntu 初步安装完成。</p>
<h5 id="4-后续设置"><a href="#4-后续设置" class="headerlink" title="4 后续设置"></a>4 后续设置</h5><p>前面只是顺利安装成功，但距离真正可以使用，还有几个设置需要继续操作下。</p>
<p>4.1）安装增强扩展包。（前面准备工作中，我们在host中安装了扩展包，Ubuntu里面也需要安装一下）</p>
<p><img src="/2020/09/23/A22/21_1.png" alt="21_1" style="zoom:50%;"></p>
<p><img src="/2020/09/23/A22/22.png" alt="22" style="zoom:50%;"></p>
<p><img src="/2020/09/23/A22/23.png" alt="23" style="zoom:50%;"></p>
<p>最明显的效果：</p>
<p>安装增强包前，不管你怎么拖放VirtualBox的界面，Ubuntu的界面总是那么一点。</p>
<p><img src="/2020/09/23/A22/24.png" alt="24" style="zoom:50%;"></p>
<p>安装后：Ubuntu的界面可以随意调整。（重启后才会更新效果）</p>
<p><img src="/2020/09/23/A22/25.png" alt="25" style="zoom:50%;"></p>
<p>4.2）设置虚拟机的网络。</p>
<p><code>Setting</code> —&gt; <code>Network</code>，然后按照下面的设置即可。</p>
<p><img src="/2020/09/23/A22/26.png" alt="26" style="zoom:50%;"></p>
<p>4.2) 设置剪切板共享：host复制的文字可以直接粘贴在Ubuntu里，反之亦然。(重启后生效)</p>
<p><img src="/2020/09/23/A22/27_1.png" alt="27_1" style="zoom:50%;"></p>
<p>4.3） 设置共享文件夹。</p>
<p>共享文件夹可以让你在host和Ubuntu之间及其方便地进行数据分享。</p>
<p>4.3.1 Virtual Box界面，点<code>Settings</code> —&gt; <code>Shared Folders</code>，然后按照下面图中设置即可。</p>
<p><img src="/2020/09/23/A22/27.png" alt="27" style="zoom:50%;"></p>
<p><code>Folder Path</code>为host的文件夹目录</p>
<p><code>Mount Point</code> 为虚拟机中所挂在的位置。</p>
<p>点OK， 然后我们进入到虚拟机中，会发现一个类似硬盘的图标，名为：<code>Shared</code>，点一下，发现没有权限。</p>
<p><img src="/2020/09/23/A22/28.png" alt="28" style="zoom:50%;"></p>
<p><code>解决办法</code></p>
<p>在Ubuntu中，打开终端<code>Terminal</code>，输入命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbro:~/Desktop$ sudo adduser <span class="variable">$USER</span> vboxsf </span><br><span class="line">[sudo] password <span class="keyword">for</span> qli: </span><br><span class="line">Adding user <span class="string">&#x27;qli&#x27;</span> to group <span class="string">&#x27;vboxsf&#x27;</span> ...</span><br><span class="line">Adding user qli to group vboxsf</span><br><span class="line">Done.</span><br></pre></td></tr></table></figure>
<p>完事后，重启虚拟机。如果不能启动，显示USB相关的报错信息。取消USB的选项，再次启动即可。</p>
<p><img src="/2020/09/23/A22/29.png" alt="28" style="zoom:50%;"></p>
<p>到这里，虚拟机的安装，设置基本就完成了，剩下的就是在Ubuntu里面安装一些常用的软件程序了。这个会在后续教程里面简单介绍。</p>
<h5 id="打赏"><a href="#打赏" class="headerlink" title="打赏"></a>打赏</h5><p>如果感觉本文对你的相关研究有帮助，欢迎打赏，支持作者的热心付出。如果你遇到相关的问题，或者也有自己擅长的操作，热烈欢迎无私分享，可以通过QQ（122103465）或者邮件（lqcata@gmail.com）联系。</p>
<p><img src="/2020/09/23/A22/打赏码.jpg" style="zoom:25%;"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2020/09/22/A21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/22/A21/" class="post-title-link" itemprop="url">Ubuntu20中P4VASP的安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-09-22 20:30:16" itemprop="dateCreated datePublished" datetime="2020-09-22T20:30:16-04:00">2020-09-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2020/09/22/A21/" class="post-meta-item leancloud_visitors" data-flag-title="Ubuntu20中P4VASP的安装" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/22/A21/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/22/A21/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>P4vasp是一款基于Python2的，用于可视化，搭建结构的软件。由于Python2已经被时代所淘汰，p4vasp官网也不见任何的针对python3的更新改进，这个软件估计要凉，跟我们再见了。但Ubuntu20安装也不是很难，能撑到博士毕业应该问题不大。经过多次的测试，下面是p4vasp的安装过程，非常简单。</p>
<h5 id="下载并解压"><a href="#下载并解压" class="headerlink" title="下载并解压"></a>下载并解压</h5><p>下载链接：<a target="_blank" rel="noopener" href="http://www.p4vasp.at/#/download">http://www.p4vasp.at/#/download</a> </p>
<p>这里本人把安装包解压缩到了<code>~/Documents/</code> 目录下。</p>
<h5 id="安装步骤-1"><a href="#安装步骤-1" class="headerlink" title="安装步骤-1"></a>安装步骤-1</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ ls</span><br><span class="line">BUGS           install           odpdom                setenvironment.sh</span><br><span class="line">ChangeLog      install-local.sh  p4v                   src</span><br><span class="line">data           install.sh        p4vasp-0.3.30-1.spec  <span class="built_in">test</span></span><br><span class="line">diagnostic.py  lib               p4vasp.log            uninstall.sh</span><br><span class="line">doc            LICENSE           p4v.py                utils</span><br><span class="line">ext            Makefile          README                vinfo.py</span><br><span class="line">FAQS           Makefile.MacOS    README.MacOS          vinfo.pyc</span><br><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ sudo apt-get install gcc make</span><br><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ sudo apt-get install make</span><br><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ sudo apt-get install python2-dev</span><br></pre></td></tr></table></figure>
<h5 id="安装步骤-2："><a href="#安装步骤-2：" class="headerlink" title="安装步骤-2："></a>安装步骤-2：</h5><p><a target="_blank" rel="noopener" href="http://archive.ubuntu.com/ubuntu/pool/universe/p/pygtk/">http://archive.ubuntu.com/ubuntu/pool/universe/p/pygtk/</a></p>
<p>从这个网站下载：python-gtk2 和 python-glade2的deb文件，下载后，双击即可安装。</p>
<p><strong>注意：</strong>先安装gtk2，再安装glade2。</p>
<p><img src="/2020/09/22/A21/A21.png" style="zoom:50%;"></p>
<h5 id="安装步骤-3："><a href="#安装步骤-3：" class="headerlink" title="安装步骤-3："></a>安装步骤-3：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ sudo apt-get install libxft-dev</span><br><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ sudo apt-get install libglfw3-dev libgl1-mesa-dev libglu1-mesa-dev</span><br><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ bash install/install-ubuntu-dependencies.sh</span><br><span class="line">qli@bigbrosci:~/Documents/p4vasp-0.3.30$ bash install.sh</span><br></pre></td></tr></table></figure>
<h5 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h5><p><code>bash install/install-ubuntu-dependencies.sh</code> 这一步最后可能会出<code>python-epydoc</code>的报错，可以忽略。</p>
<h5 id="反馈："><a href="#反馈：" class="headerlink" title="反馈："></a>反馈：</h5><p>上面的命令是Ubuntu20里面安装用的，如果安装过程出现问题，或者有更好的安装方法，欢迎交流讨论：</p>
<p>QQ：122103465</p>
<p>E-mail：lqcata@gmail.com</p>
<p>至于其他的Linux系统，本人没有测试，如果你有比较好的安装方法，也欢迎分享讨论。</p>
<h5 id="打赏"><a href="#打赏" class="headerlink" title="打赏"></a>打赏</h5><p>如果感觉本文对你的相关研究有帮助，欢迎打赏，支持作者的热心付出。如果你也有自己的骚操作，热烈欢迎无私分享，可以通过QQ（122103465）或者邮件（lqcata@gmail.com）联系。</p>
<p><img src="/2020/09/22/A21/打赏码.jpg" style="zoom:25%;"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://www.bigbrosci.com/2020/09/19/A20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="By BigBro(a)s">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn VASP The Hard Way">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/19/A20/" class="post-title-link" itemprop="url">ASE的骚操作系列（SMILES-To-XYZ）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-09-19 20:30:16" itemprop="dateCreated datePublished" datetime="2020-09-19T20:30:16-04:00">2020-09-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-12-27 22:15:54" itemprop="dateModified" datetime="2021-12-27T22:15:54-05:00">2021-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LVASPTHW/" itemprop="url" rel="index"><span itemprop="name">LVASPTHW</span></a>
        </span>
    </span>

  
    <span id="/2020/09/19/A20/" class="post-meta-item leancloud_visitors" data-flag-title="ASE的骚操作系列（SMILES-To-XYZ）" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/19/A20/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/19/A20/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天我们介绍ASE的另一个骚操作：结合Openbabel自动搭分子结构。与其说是ASE的骚操作，不如把这个骚字放在Openbabel头上。Openbabel是一款功能极其强大的结构转化工具。如果你在用它，我就不在这里啰嗦了。如果你没听过，可以通过这个链接来初步了解一下。（<a target="_blank" rel="noopener" href="http://openbabel.org/wiki/Main_Page）">http://openbabel.org/wiki/Main_Page）</a></p>
<p>鉴于Openbabel的安装比较蛋疼，先送一波福利（Mac，Linux用户）。下面是本人通过Anaconda（已经路转粉）创建虚拟环境，并且安装这些软件的一些命令。通过它们可以让你安全顺利，麻溜滴地安装Openbabel, RDkit, Ase，和pymatgen。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">conda create --name qrobot</span><br><span class="line">conda activate qrobot</span><br><span class="line">conda install -c conda-forge openbabel</span><br><span class="line">conda install -c conda-forge rdkit</span><br><span class="line">conda install -c conda-forge ase</span><br><span class="line">conda install --channel conda-forge pymatgen</span><br></pre></td></tr></table></figure>
<p>RDkit也是一款功能及其强大地软件，尤其是化学信息学，生物化学相关的领域。如果不了解，点击这个官网学习。（<a target="_blank" rel="noopener" href="https://www.rdkit.org/）顺便吐槽一下，百度里面你搜索一堆RDkit的使用，大部分都是把官网例子复制过来，然后贴个二维码要钱的。交不交智商税决定权在你手上，如果手痒，请跳到文末最后，把钱打赏给我。">https://www.rdkit.org/）顺便吐槽一下，百度里面你搜索一堆RDkit的使用，大部分都是把官网例子复制过来，然后贴个二维码要钱的。交不交智商税决定权在你手上，如果手痒，请跳到文末最后，把钱打赏给我。</a></p>
<p>废话不多说，转到我们今天的主题： SMILES to XYZ。又是一个新知识，什么是SMILES？ </p>
<p>SMILES是<strong>simplified molecular-input line-entry system</strong> 的缩写，旨在用ASCII字符串来标识，描述分子的结构。如果你不了解，可以通过下面两个链接初步了解一下：</p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Simplified_molecular-input_line-entry_system">https://en.wikipedia.org/wiki/Simplified_molecular-input_line-entry_system</a></p>
<p><a target="_blank" rel="noopener" href="https://www.daylight.com/dayhtml/doc/theory/theory.smiles.html">https://www.daylight.com/dayhtml/doc/theory/theory.smiles.html</a></p>
<p>通过SMILES我们可以将一个分子用字符串来标识出来，比如我们后面练习中的：</p>
<p>乙醇（CCO），甲烷（C），甲基（[CH3]）, 苯（c1ccccc1）。</p>
<p>所以，在操作之前，你需要知道所搭结构的SMILES字符串。通过上面两个链接，耐心钻研一下，应该不到1天就可以搞定大部分的分子。将SMILES转化为3D的结构，可以通过Openbabel，也可以通过RDkit。今天我们就介绍前者。下面是脚本内容（smiles_to_xyz.py）以及使用的效果。最后，我们再详细解释这个脚本是怎么工作的。</p>
<h5 id="脚本内容"><a href="#脚本内容" class="headerlink" title="脚本内容"></a>脚本内容</h5><p>下载链接：<a target="_blank" rel="noopener" href="https://github.com/BigBroSci-LVTHW/LVTHW/tree/master/source/_posts/A20">https://github.com/BigBroSci-LVTHW/LVTHW/tree/master/source/_posts/A20</a> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3 </span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">convert SMILES to xyz</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> openbabel <span class="keyword">import</span> pybel</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> ase</span><br><span class="line"><span class="keyword">import</span> ase.io</span><br><span class="line"><span class="keyword">from</span> ase <span class="keyword">import</span> Atoms</span><br><span class="line"><span class="keyword">from</span> ase.constraints <span class="keyword">import</span> FixAtoms</span><br><span class="line"> </span><br><span class="line">smiles, out_name = sys.argv[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Introduction to SMILES:</span></span><br><span class="line"><span class="string">https://en.wikipedia.org/wiki/Simplified_molecular-input_line-entry_system</span></span><br><span class="line"><span class="string">https://www.daylight.com/dayhtml/doc/theory/theory.smiles.html</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Use openbabel to convert SMILES to xyz. </span></span><br><span class="line">mol = pybel.readstring(<span class="string">&quot;smi&quot;</span>, smiles)</span><br><span class="line">mol.make3D(forcefield=<span class="string">&#x27;mmff94&#x27;</span>, steps=<span class="number">100</span>)</span><br><span class="line"><span class="comment"># mol.write(&quot;xyz&quot;, filename=out_name+&#x27;_pybel.xyz&#x27;, overwrite=True)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># USE ase to make POSCAR</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; https://wiki.fysik.dtu.dk/ase/ase/atoms.html&#x27;&#x27;&#x27;</span></span><br><span class="line">geo = Atoms()</span><br><span class="line">geo.set_cell(np.array([[<span class="number">16.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>],[<span class="number">0.0</span>, <span class="number">17.0</span>, <span class="number">0.0</span>],[<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">18.0</span>]]))</span><br><span class="line">geo.set_pbc((<span class="literal">True</span>,<span class="literal">True</span>,<span class="literal">True</span>))</span><br><span class="line"><span class="keyword">for</span> atom <span class="keyword">in</span> mol:</span><br><span class="line">    atom_type = atom.atomicnum</span><br><span class="line">    atom_position = np.array([<span class="built_in">float</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> atom.coords])</span><br><span class="line">    geo.append(atom_type)</span><br><span class="line">    geo.positions[-<span class="number">1</span>] = atom_position</span><br><span class="line">geo.center()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;https://wiki.fysik.dtu.dk/ase/ase/constraints.html&#x27;&#x27;&#x27;</span></span><br><span class="line">c = FixAtoms(indices=[atom.index <span class="keyword">for</span> atom <span class="keyword">in</span> geo <span class="keyword">if</span> atom.symbol == <span class="string">&#x27;XX&#x27;</span>])</span><br><span class="line">geo.set_constraint(c)</span><br><span class="line"></span><br><span class="line">ase.io.write(out_name + <span class="string">&#x27;_ase.xyz&#x27;</span>, geo, <span class="built_in">format</span>=<span class="string">&#x27;xyz&#x27;</span>)</span><br><span class="line">ase.io.write(out_name + <span class="string">&#x27;_POSCAR&#x27;</span>, geo, <span class="built_in">format</span>=<span class="string">&#x27;vasp&#x27;</span>, vasp5=<span class="string">&#x27;True&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="脚本运行"><a href="#脚本运行" class="headerlink" title="脚本运行"></a>脚本运行</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> (qrobot) qli@MacBook-Pro test_openbabel % python3 smiles_to_xyz.py <span class="string">&#x27;[CH3]&#x27;</span> Methyl</span><br><span class="line"> (qrobot) qli@MacBook-Pro test_openbabel % python3 smiles_to_xyz.py <span class="string">&#x27;CCO&#x27;</span> ET</span><br><span class="line"> (qrobot) qli@MacBook-Pro test_openbabel % python3 smiles_to_xyz.py <span class="string">&#x27;C&#x27;</span> Methane</span><br><span class="line"> (qrobot) qli@MacBook-Pro test_openbabel % python3 smiles_to_xyz.py <span class="string">&#x27;c1ccccc1&#x27;</span> BZ</span><br><span class="line"> (qrobot) qli@MacBook-Pro test_openbabel % ls</span><br><span class="line">BZ_POSCAR         BZ_ase.xyz        ET_POSCAR         ET_ase.xyz        Methane_POSCAR    Methane_ase.xyz   Methyl_POSCAR     Methyl_ase.xyz    smiles_to_xyz.py</span><br></pre></td></tr></table></figure>
<h5 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h5><p><img src="/2020/09/19/A20/BZ.png" alt=""></p>
<p><img src="/2020/09/19/A20/ET.png" alt="ET"></p>
<p><img src="/2020/09/19/A20/Methane.png" alt="Methane"></p>
<p><img src="/2020/09/19/A20/Methyl.png" alt="Methyl"></p>
<h5 id="内容详解"><a href="#内容详解" class="headerlink" title="内容详解"></a>内容详解</h5><ol>
<li>Openbabel部分其实就三行代码，非常简单。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> mol = pybel.readstring(<span class="string">&quot;smi&quot;</span>, smiles)</span><br><span class="line"><span class="number">2</span> mol.make3D(forcefield=<span class="string">&#x27;mmff94&#x27;</span>, steps=<span class="number">100</span>)</span><br><span class="line"><span class="number">3</span> <span class="comment"># mol.write(&quot;xyz&quot;, filename=out_name+&#x27;_pybel.xyz&#x27;, overwrite=True)</span></span><br></pre></td></tr></table></figure>
<p>1) 读取SMILES，并创建一个mol的对象（object）。</p>
<p>2) <code>make3D</code> 通过MMFF94力场对生成的3D结构优化了100步。 </p>
<p>3) 保存结构，这里我把它注释掉了，因为后面我们要通过ASE来生成xyz和POSCAR。</p>
<ol>
<li>ASE部分，代码多一些，可能本人水平有限吧。不管怎么样，这里主要告诉大家的一点就是：我们可以将Openbabel和ASE无缝连接起来。同样，你也可以把ASE与你自己写的一些东西关联，这样就可以调用ASE的功能来快速实现一些小目标了。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> geo = Atoms()</span><br><span class="line"><span class="number">2</span> geo.set_cell(np.array([[<span class="number">16.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>],[<span class="number">0.0</span>, <span class="number">17.0</span>, <span class="number">0.0</span>],[<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">18.0</span>]]))</span><br><span class="line"><span class="number">3</span> geo.set_pbc((<span class="literal">True</span>,<span class="literal">True</span>,<span class="literal">True</span>))</span><br><span class="line"><span class="number">4</span> <span class="keyword">for</span> atom <span class="keyword">in</span> mol:</span><br><span class="line"><span class="number">5</span>    atom_type = atom.atomicnum</span><br><span class="line"><span class="number">6</span>    atom_position = np.array([<span class="built_in">float</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> atom.coords])</span><br><span class="line"><span class="number">7</span>    geo.append(atom_type)</span><br><span class="line"><span class="number">8</span>    geo.positions[-<span class="number">1</span>] = atom_position</span><br><span class="line"><span class="number">9</span> geo.center()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;https://wiki.fysik.dtu.dk/ase/ase/constraints.html&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="number">10</span> c = FixAtoms(indices=[atom.index <span class="keyword">for</span> atom <span class="keyword">in</span> geo <span class="keyword">if</span> atom.symbol == <span class="string">&#x27;XX&#x27;</span>])</span><br><span class="line"><span class="number">11</span> geo.set_constraint(c)</span><br><span class="line"></span><br><span class="line"><span class="number">12</span> ase.io.write(out_name + <span class="string">&#x27;_ase.xyz&#x27;</span>, geo, <span class="built_in">format</span>=<span class="string">&#x27;xyz&#x27;</span>)</span><br><span class="line"><span class="number">13</span> ase.io.write(out_name + <span class="string">&#x27;_POSCAR&#x27;</span>, geo, <span class="built_in">format</span>=<span class="string">&#x27;vasp&#x27;</span>, vasp5=<span class="string">&#x27;True&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>1）创建一个ASE的Atom空对象；</p>
<p>2）设置放分子的格子大小，这里我们用的是16x17x18 $\AA^3$的。如果嫌小，自己改大一下就可以了。</p>
<p>3）设置周期性；</p>
<p>4-8）将<code>Openbabel</code>的<code>mol</code>对象中的原子添加到<code>ASE</code>的<code>Atom</code>对象里面。</p>
<p>9）将分子放到格子的中心。</p>
<p>10-11）固定或者放开原子，这里我们打算放开所有的原子，所以用到了一个<code>XX</code> 。如果原子符号是<code>XX</code>，那么就固定住。其实世界上根本就没有<code>XX</code>原子，因此所有的原子就会被放开了。</p>
<p>12-13） 保存xyz和VASP的POSCAR。</p>
<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><p>通过SMILES来搭建结构非常方便，当然也可以通过数据库下载，可视化程序例如GaussianView等自己手动搭建。</p>
<p>值得注意的是，不管通过什么方式搭建的结构，提交任务之前，都要尽可能保证结构的合理性。所以不要搭建完结构就立刻提交任务，先认真检查一遍，没有任何问题之后再提交。</p>
<h5 id="打赏"><a href="#打赏" class="headerlink" title="打赏"></a>打赏</h5><p>如果感觉本文对你的相关研究有帮助，欢迎打赏，支持作者的热心付出。如果你也有自己的骚操作，热烈欢迎无私分享，可以通过QQ（122103465）或者邮件（lqcata@gmail.com）联系。</p>
<p><img src="/2020/09/19/A20/打赏码.jpg" style="zoom:25%;"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">By BigBro(a)s</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"OWE4jcfK8IWkx4zaWuOloxKU-gzGzoHsz","app_key":"MRBwViAFCsPSOnnRF9LW7bdo","server_url":null,"security":true}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"bigbrosci-com","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({{ JSON.stringify(config) }});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="{{ src }}">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

</body>
</html>
